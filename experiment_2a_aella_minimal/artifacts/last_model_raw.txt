```json
{
  "files": [
    {
      "path": "scripts/analyze_h3_networth_vs_work_satisfaction.py",
      "content": "\"#!/usr/bin/env python3\n\"\"\"Deterministic analysis for Hypothesis H3: Net worth vs. work satisfaction.\n\nThis script summarises current work/career satisfaction across ordered net worth\nbrackets under a simple random sampling (SRS) assumption. It outputs group-level\nstatistics alongside differences in mean satisfaction relative to the lowest\nnet worth bracket while enforcing the configured minimum cell size for privacy.\n\nAll calculations are deterministic; random seeds from the configuration are\nrecorded for reproducibility even though no stochastic procedures are used.\n\"\"\"\n\nfrom __future__ import annotations\n\nimport argparse\nimport json\nimport math\nfrom dataclasses import dataclass\nfrom datetime import datetime, timezone\nfrom pathlib import Path\nfrom typing import Any, Dict, List, Optional, Sequence, Tuple\n\nimport shlex\n\nimport numpy as np\nimport pandas as pd\nimport yaml\n\n\nNETWORTH_CODE_COLUMN = \"networth\"\nNETWORTH_LABEL_COLUMN = \"Your CURRENT net worth is closest to (nhoz8ia)\"\nSATISFACTION_COLUMN = \"I am satisfied with my work/career life (or lack thereof) (z0mhd63)\"\n\n\n@dataclass(frozen=True)\nclass AnalysisConfig:\n    seed: int\n    min_cell_size: int\n    weight_variable: Optional[str]\n    variance_method: str\n    design_assumption: str\n\n\ndef load_yaml(path: Path) -> Dict[str, Any]:\n    if not path:\n        return {}\n    if not path.exists():\n        return {}\n    with path.open(\"r\", encoding=\"utf-8\") as handle:\n        return yaml.safe_load(handle) or {}\n\n\ndef resolve_seed(config: Dict[str, Any], default_seed: int = 20251016) -> int:\n    value = config.get(\"seed\", default_seed)\n    try:\n        return int(value)\n    except (TypeError, ValueError):\n        return default_seed\n\n\ndef resolve_min_cell_size(config: Dict[str, Any], override: Optional[int]) -> int:\n    if override is not None:\n        return int(override)\n    try:\n        return int(config.get(\"privacy\", {}).get(\"min_cell_size\", 10))\n    except (TypeError, ValueError):\n        return 10\n\n\ndef resolve_analysis_config(\n    agent_config_path: Path,\n    design_path: Optional[Path],\n    min_cell_override: Optional[int],\n) -> AnalysisConfig:\n    agent_cfg = load_yaml(agent_config_path)\n    design_cfg = load_yaml(design_path) if design_path else {}\n\n    seed = resolve_seed(agent_cfg)\n    min_cell = resolve_min_cell_size(agent_cfg, min_cell_override)\n    analysis_defaults = agent_cfg.get(\"analysis_defaults\", {})\n\n    weight_variable = analysis_defaults.get(\"weight_variable\")\n    variance_method = str(analysis_defaults.get(\"variance_method\", \"taylor\"))\n    design_assumption = str(\n        design_cfg.get(\n            \"design_assumption\",\n            \"Simple random sample treated as equal weights.\",\n        )\n    )\n\n    return AnalysisConfig(\n        seed=seed,\n        min_cell_size=min_cell,\n        weight_variable=weight_variable,\n        variance_method=variance_method,\n        design_assumption=design_assumption,\n    )\n\n\ndef build_networth_labels(df: pd.DataFrame) -> Dict[int, str]:\n    \"\"\"Map numeric net worth codes to modal text labels from the survey prompt.\"\"\"\n    mapping: Dict[int, str] = {}\n    grouped = df.groupby(NETWORTH_CODE_COLUMN)[NETWORTH_LABEL_COLUMN]\n    for code, series in grouped:\n        if pd.isna(code):\n            continue\n        clean_code = int(round(float(code)))\n        label = series.mode()\n        mapping[clean_code] = str(label.iat[0]) if not label.empty else f\"Bracket {clean_code}\"\n    return mapping\n\n\ndef compute_group_statistics(\n    df: pd.DataFrame,\n    config: AnalysisConfig,\n    labels: Dict[int, str],\n) -> Tuple[List[Dict[str, Any]], Dict[int, Dict[str, Any]]]:\n    records: List[Dict[str, Any]] = []\n    cache: Dict[int, Dict[str, Any]] = {}\n\n    for code in sorted(df[NETWORTH_CODE_COLUMN].unique()):\n        group = df.loc[df[NETWORTH_CODE_COLUMN] == code]\n        n_total = int(group.shape[0])\n        label = labels.get(code, f\"Bracket {code}\")\n        base_record: Dict[str, Any] = {\n            \"networth_code\": int(code),\n            \"networth_label\": label,\n            \"n_total\": n_total if n_total >= config.min_cell_size else \"suppressed_lt_10\",\n            \"seed\": config.seed,\n            \"min_cell_size\": config.min_cell_size,\n            \"weight_variable\": config.weight_variable,\n            \"variance_method\": config.variance_method,\n            \"design_assumption\": config.design_assumption,\n        }\n\n        if n_total < config.min_cell_size:\n            base_record.update(\n                {\n                    \"mean_satisfaction\": \"suppressed_lt_10\",\n                    \"std_satisfaction\": \"suppressed_lt_10\",\n                    \"se_satisfaction\": \"suppressed_lt_10\",\n                    \"ci_lower_95\": \"suppressed_lt_10\",\n                    \"ci_upper_95\": \"suppressed_lt_10\",\n                }\n            )\n            cache[code] = {\"suppressed\": True}\n            records.append(base_record)\n            continue\n\n        satisfaction = group[SATISFACTION_COLUMN]\n        mean_val = float(satisfaction.mean())\n        variance = float(satisfaction.var(ddof=1)) if n_total > 1 else 0.0\n        std_val = math.sqrt(variance)\n        se_val = std_val / math.sqrt(n_total) if n_total > 0 else float(\"nan\")\n        ci_margin = 1.96 * se_val\n\n        base_record.update(\n            {\n                \"mean_satisfaction\": round(mean_val, 6),\n                \"std_satisfaction\": round(std_val, 6),\n                \"se_satisfaction\": round(se_val, 6),\n                \"ci_lower_95\": round(mean_val - ci_margin, 6),\n                \"ci_upper_95\": round(mean_val + ci_margin, 6),\n            }\n        )\n        cache[code] = {\n            \"suppressed\": False,\n            \"n\": n_total,\n            \"mean\": mean_val,\n            \"variance\": variance,\n            \"label\": label,\n        }\n        records.append(base_record)\n\n    return records, cache\n\n\ndef compute_differences(\n    codes: Sequence[int],\n    cache: Dict[int, Dict[str, Any]],\n    baseline_code: int,\n    config: AnalysisConfig,\n) -> List[Dict[str, Any]]:\n    results: List[Dict[str, Any]] = []\n    base_stats = cache.get(baseline_code)\n    for code in codes:\n        stats = cache.get(code)\n        label = stats.get(\"label\") if stats else f\"Bracket {code}\"\n        record: Dict[str, Any] = {\n            \"networth_code\": int(code),\n            \"networth_label\": label,\n            \"baseline_code\": int(baseline_code),\n            \"baseline_label\": base_stats.get(\"label\") if base_stats else f\"Bracket {baseline_code}\",\n            \"seed\": config.seed,\n            \"min_cell_size\": config.min_cell_size,\n            \"weight_variable\": config.weight_variable,\n            \"variance_method\": config.variance_method,\n            \"design_assumption\": config.design_assumption,\n        }\n\n        suppressed = (\n            base_stats is None\n            or stats is None\n            or base_stats.get(\"suppressed\")\n            or stats.get(\"suppressed\")\n        )\n        if suppressed:\n            record.update(\n                {\n                    \"mean_diff\": \"suppressed_lt_10\",\n                    \"se_diff\": \"suppressed_lt_10\",\n                    \"ci_lower_95\": \"suppressed_lt_10\",\n                    \"ci_upper_95\": \"suppressed_lt_10\",\n                    \"n_group\": \"suppressed_lt_10\",\n                    \"n_baseline\": \"suppressed_lt_10\",\n                }\n            )\n            results.append(record)\n            continue\n\n        n_group = stats[\"n\"]\n        n_base = base_stats[\"n\"]\n        if code == baseline_code:\n            se = 0.0\n            diff = 0.0\n        else:\n            variance = stats[\"variance\"] / n_group + base_stats[\"variance\"] / n_base\n            se = math.sqrt(variance)\n            diff = stats[\"mean\"] - base_stats[\"mean\"]\n        ci_margin = 1.96 * se\n\n        record.update(\n            {\n                \"n_group\": int(n_group),\n                \"n_baseline\": int(n_base),\n                \"mean_diff\": round(diff, 6),\n                \"se_diff\": round(se, 6),\n                \"ci_lower_95\": round(diff - ci_margin, 6),\n                \"ci_upper_95\": round(diff + ci_margin, 6),\n            }\n        )\n        results.append(record)\n\n    return results\n\n\ndef parse_args(argv: Optional[Sequence[str]] = None) -> argparse.Namespace:\n    parser = argparse.ArgumentParser(\n        description=\"Deterministic H3 analysis: net worth vs. work satisfaction.\"\n    )\n    parser.add_argument(\"--csv\", required=True, type=Path, help=\"Input CSV dataset.\")\n    parser.add_argument(\"--config\", required=True, type=Path, help=\"Agent configuration YAML.\")\n    parser.add_argument(\"--design\", required=False, type=Path, help=\"Survey design YAML.\")\n    parser.add_argument(\"--out\", required=True, type=Path, help=\"Output CSV for group summaries.\")\n    parser.add_argument(\n        \"--diff-out\",\n        required=True,\n        type=Path,\n        help=\"Output CSV for differences relative to the lowest net worth bracket.\",\n    )\n    parser.add_argument(\n        \"--manifest\", required=True, type=Path, help=\"Manifest JSON capturing reproducibility metadata.\"\n    )\n    parser.add_argument(\n        \"--min-cell-size\",\n        required=False,\n        type=int,\n        default=None,\n        help=\"Override minimum cell size (defaults to config.privacy.min_cell_size).\",\n    )\n    return parser.parse_args(argv)\n\n\ndef main(argv: Optional[Sequence[str]] = None) -> int:\n    args = parse_args(argv)\n\n    config = resolve_analysis_config(args.config, args.design, args.min_cell_size)\n\n    usecols = [\n        NETWORTH_CODE_COLUMN,\n        NETWORTH_LABEL_COLUMN,\n        SATISFACTION_COLUMN,\n    ]\n    df = pd.read_csv(args.csv, usecols=usecols, low_memory=False)\n    df = df.copy()\n    df[NETWORTH_CODE_COLUMN] = pd.to_numeric(df[NETWORTH_CODE_COLUMN], errors=\"coerce\").astype(\"float\")\n    df[SATISFACTION_COLUMN] = pd.to_numeric(df[SATISFACTION_COLUMN], errors=\"coerce\")\n    df = df.dropna(subset=[NETWORTH_CODE_COLUMN, SATISFACTION_COLUMN])\n    df[NETWORTH_CODE_COLUMN] = df[NETWORTH_CODE_COLUMN].round().astype(int)\n\n    labels = build_networth_labels(df)\n\n    group_records, cache = compute_group_statistics(df, config, labels)\n    codes = sorted(cache.keys())\n    if not codes:\n        raise ValueError(\"No valid net worth groups found after filtering for non-missing values.\")\n    baseline_code = min(codes)\n    diff_records = compute_differences(codes, cache, baseline_code, config)\n\n    args.out.parent.mkdir(parents=True, exist_ok=True)\n    args.diff_out.parent.mkdir(parents=True, exist_ok=True)\n    args.manifest.parent.mkdir(parents=True, exist_ok=True)\n\n    pd.DataFrame.from_records(group_records).to_csv(args.out, index=False)\n    pd.DataFrame.from_records(diff_records).to_csv(args.diff_out, index=False)\n\n    spearman = float(\n        df[NETWORTH_CODE_COLUMN].corr(df[SATISFACTION_COLUMN], method=\"spearman\")\n    )\n    pearson = float(df[NETWORTH_CODE_COLUMN].corr(df[SATISFACTION_COLUMN], method=\"pearson\"))\n\n    script_path = Path(__file__).resolve()\n    cwd = Path.cwd().resolve()\n    try:\n        script_path = script_path.relative_to(cwd)\n    except ValueError:\n        pass\n\n    command_parts = [\n        \"python\",\n        script_path.as_posix(),\n        \"--csv\",\n        str(args.csv),\n        \"--config\",\n        str(args.config),\n    ]\n    if args.design:\n        command_parts.extend([\"--design\", str(args.design)])\n    command_parts.extend(\n        [\n            \"--out\",\n            str(args.out),\n            \"--diff-out\",\n            str(args.diff_out),\n            \"--manifest\",\n            str(args.manifest),\n        ]\n    )\n    if args.min_cell_size is not None:\n        command_parts.extend([\"--min-cell-size\", str(args.min_cell_size)])\n\n    manifest_payload = {\n        \"analysis\": \"H3: Net worth vs. work satisfaction\",\n        \"command\": shlex.join(command_parts),\n        \"config\": str(args.config),\n        \"dataset\": str(args.csv),\n        \"design\": str(args.design) if args.design else None,\n        \"design_assumption\": config.design_assumption,\n        \"min_cell_size\": config.min_cell_size,\n        \"outputs\": {\n            \"group_stats_csv\": str(args.out),\n            \"difference_csv\": str(args.diff_out),\n        },\n        \"seed\": config.seed,\n        \"timestamp_utc\": datetime.now(tz=timezone.utc).isoformat(),\n        \"variance_method\": config.variance_method,\n        \"weight_variable\": config.weight_variable,\n        \"networth_labels\": {int(k): v for k, v in labels.items()},\n        \"row_counts\": {\n            \"total_rows\": int(df.shape[0]),\n            \"unique_networth_groups\": len(codes),\n        },\n        \"correlations\": {\n            \"spearman_r\": round(spearman, 6),\n            \"pearson_r\": round(pearson, 6),\n        },\n        \"baseline_code\": int(baseline_code),\n        \"baseline_label\": labels.get(baseline_code, f\"Bracket {baseline_code}\"),\n    }\n\n    with args.manifest.open(\"w\", encoding=\"utf-8\") as handle:\n        json.dump(manifest_payload, handle, indent=2)\n\n    return 0\n\n\nif __name__ == \"__main__\":\n    raise SystemExit(main())\n\"",
      "mode": "text"
    },
    {
      "path": "tables/h3_networth_work_satisfaction.csv",
      "content": "\"networth_code,networth_label,n_total,seed,min_cell_size,weight_variable,variance_method,design_assumption,mean_satisfaction,std_satisfaction,se_satisfaction,ci_lower_95,ci_upper_95\\n-3,\\\"$-100,000 (in debt)\\\",348,20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,-0.08046,2.002698,0.107356,-0.290877,0.129958\\n-2,\\\"$-10,000 (in debt)\\\",795,20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,-0.715723,2.030546,0.072016,-0.856875,-0.574572\\n-1,$-1000 (in debt),235,20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,-1.06383,2.17802,0.142078,-1.342303,-0.785356\\n0,$0,1304,20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,-0.842025,1.945035,0.053863,-0.947596,-0.736454\\n1,\\\"$1,000\\\",1642,20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,-0.637028,1.956827,0.048291,-0.731678,-0.542378\\n2,\\\"$10,000\\\",3524,20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,-0.148695,1.961891,0.033049,-0.21347,-0.083919\\n3,\\\"$100,000\\\",3763,20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,0.598193,1.883959,0.030712,0.537998,0.658388\\n4,\\\"$1,000,000\\\",2005,20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,1.013466,1.817337,0.040586,0.933917,1.093015\\n5,\\\"$10,000,000\\\",460,20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,1.297826,1.711296,0.07979,1.141438,1.454214\\n6,\\\"$100,000,000 or more\\\",360,20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,0.872222,2.034605,0.107233,0.662045,1.082399\\n\"",
      "mode": "text"
    },
    {
      "path": "tables/h3_networth_work_satisfaction_diff.csv",
      "content": "\"networth_code,networth_label,baseline_code,baseline_label,seed,min_cell_size,weight_variable,variance_method,design_assumption,n_group,n_baseline,mean_diff,se_diff,ci_lower_95,ci_upper_95\\n-3,\\\"$-100,000 (in debt)\\",-3,\\\"$-100,000 (in debt)\\\",20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,348,348,0.0,0.0,0.0,0.0\\n-2,\\\"$-10,000 (in debt)\\",-3,\\\"$-100,000 (in debt)\\\",20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,795,348,-0.635264,0.129273,-0.888639,-0.381888\\n-1,$-1000 (in debt),-3,\\\"$-100,000 (in debt)\\\",20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,235,348,-0.98337,0.178077,-1.332402,-0.634338\\n0,$0,-3,\\\"$-100,000 (in debt)\\\",20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,1304,348,-0.761565,0.12011,-0.996981,-0.526149\\n1,\\\"$1,000\\",-3,\\\"$-100,000 (in debt)\\\",20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,1642,348,-0.556568,0.117717,-0.787294,-0.325843\\n2,\\\"$10,000\\",-3,\\\"$-100,000 (in debt)\\\",20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,3524,348,-0.068235,0.112328,-0.288397,0.151927\\n3,\\\"$100,000\\",-3,\\\"$-100,000 (in debt)\\\",20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,3763,348,0.678653,0.111662,0.459794,0.897511\\n4,\\\"$1,000,000\\",-3,\\\"$-100,000 (in debt)\\\",20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,2005,348,1.093926,0.114772,0.868974,1.318878\\n5,\\\"$10,000,000\\",-3,\\\"$-100,000 (in debt)\\\",20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,460,348,1.378286,0.13376,1.116117,1.640455\\n6,\\\"$100,000,000 or more\\",-3,\\\"$-100,000 (in debt)\\\",20251016,10,,taylor,Treat as simple random sample until sponsor provides design metadata.,360,348,0.952682,0.151737,0.655277,1.250087\\n\"",
      "mode": "text"
    },
    {
      "path": "artifacts/h3_networth_vs_work_manifest.json",
      "content": "\"{\\n  \\\"analysis\\\": \\\"H3: Net worth vs. work satisfaction\\\",\\n  \\\"command\\\": \\\"python scripts/analyze_h3_networth_vs_work_satisfaction.py --csv childhoodbalancedpublic_original.csv --config config/agent_config.yaml --design docs/survey_design.yaml --out tables/h3_networth_work_satisfaction.csv --diff-out tables/h3_networth_work_satisfaction_diff.csv --manifest artifacts/h3_networth_vs_work_manifest.json\\\",\\n  \\\"config\\\": \\\"config/agent_config.yaml\\\",\\n  \\\"dataset\\\": \\\"childhoodbalancedpublic_original.csv\\\",\\n  \\\"design\\\": \\\"docs/survey_design.yaml\\\",\\n  \\\"design_assumption\\\": \\\"Treat as simple random sample until sponsor provides design metadata.\\\",\\n  \\\"min_cell_size\\\": 10,\\n  \\\"outputs\\\": {\\n    \\\"group_stats_csv\\\": \\\"tables/h3_networth_work_satisfaction.csv\\\",\\n    \\\"difference_csv\\\": \\\"tables/h3_networth_work_satisfaction_diff.csv\\\"\\n  },\\n  \\\"seed\\\": 20251016,\\n  \\\"timestamp_utc\\\": \\\"2025-11-04T20:35:03.302514+00:00\\\",\\n  \\\"variance_method\\\": \\\"taylor\\\",\\n  \\\"weight_variable\\\": null,\\n  \\\"networth_labels\\\": {\\n    \\\"-3\\\": \\\"$-100,000 (in debt)\\\",\\n    \\\"-2\\\": \\\"$-10,000 (in debt)\\\",\\n    \\\"-1\\\": \\\"$-1000 (in debt)\\\",\\n    \\\"0\\\": \\\"$0\\\",\\n    \\\"1\\\": \\\"$1,000\\\",\\n    \\\"2\\\": \\\"$10,000\\\",\\n    \\\"3\\\": \\\"$100,000\\\",\\n    \\\"4\\\": \\\"$1,000,000\\\",\\n    \\\"5\\\": \\\"$10,000,000\\\",\\n    \\\"6\\\": \\\"$100,000,000 or more\\\"\\n  },\\n  \\\"row_counts\\\": {\\n    \\\"total_rows\\\": 14436,\\n    \\\"unique_networth_groups\\\": 10\\n  },\\n  \\\"correlations\\\": {\\n    \\\"spearman_r\\\": 0.322328,\\n    \\\"pearson_r\\\": 0.280833\\n  },\\n  \\\"baseline_code\\\": -3,\\n  \\\"baseline_label\\\": \\\"$-100,000 (in debt)\\\"\\n}\"",
      "mode": "text"
    },
    {
      "path": "analysis/hypotheses.csv",
      "content": "\"hypothesis_id,hypothesis_text,priority,variables,status,notes\\nH-001,\\\"Active religious practice rates differ by biological sex.\\\",1,\\\"['biomale','religion']\\\",complete,\\\"Results documented in reports/findings_summary.md, reports/manuscript.md, and manuscript.tex; regenerate via scripts/analyze_h1_religion_by_biomale.py (seed 20251016).\\\"\\nH-002,\\\"Higher childhood religious strictness associates with greater adult happiness change.\\\",2,\\\"['externalreligion','On average, I am happier as an adult than I was in childhood (h33e6gg)']\\\",complete,\\\"Results documented in reports/findings_summary.md, reports/manuscript.md, and manuscript.tex; regenerate via scripts/analyze_h2_religion_strictness_vs_happiness.py (seed 20251016).\\\"\\nH-003,\\\"Net worth brackets correlate with work/career satisfaction.\\\",3,\\\"['networth','I am satisfied with my work/career life (z0mhd63)']\\\",complete,\\\"Prototype SRS analysis complete; see tables/h3_networth_work_satisfaction.csv and tables/h3_networth_work_satisfaction_diff.csv (manifest artifacts/h3_networth_vs_work_manifest.json). Regenerate via scripts/analyze_h3_networth_vs_work_satisfaction.py (seed 20251016).\\\"\\nH-004,\\\"Self-reported depression tendency aligns with stress sensitivity.\\\",3,\\\"['I tend to suffer from depression (wz901dj)','I'm quite sensitive to stress (qhyti2r)-neg']\\\",draft,\\\"Requires scale harmonization and privacy review.\\\"\\nH-005,\\\"Older respondents report higher counts of lifetime sexual partners.\\\",3,\\\"['selfage','How many people have you had sex with? (ewvvaz2)']\\\",draft,\\\"Assess monotonic trend with count models under SRS assumption.\\\"\\n\"",
      "mode": "text"
    },
    {
      "path": "analysis/pre_analysis_plan.md",
      "content": "\"# Pre-Analysis Plan (Draft)\\n\\n**Seed:** 20251016  \\n**Regeneration command:** `python scripts/bootstrap_artifacts.py`\\n\\n## Project Overview\\nThis document sketches the initial analytic roadmap for the childhood balance public survey. It is a living draft that will be versioned until the PAP is frozen. The plan prioritizes reproducibility, privacy (minimum cell size = 10), and alignment between Markdown deliverables and the future LaTeX manuscript (`manuscript.tex`).\\n\\n## Data & Design Inputs\\n- Primary dataset: `childhoodbalancedpublic_original.csv` (read-only source).\\n- Metadata: `docs/codebook.json` (variable stubs) and `docs/survey_design.yaml` (design placeholders).\\n- Weighting: pending confirmation of the final weight variable. Analyses will default to unweighted diagnostic checks until `weight_variable` is populated, after which all estimates will be weighted.\\n\\n## Candidate Hypotheses (Descriptive/Associational)\\n1. **H-A:** The weighted proportion of respondents who currently practice a religion (`religion`) differs by biological sex (`biomale`).\\n2. **H-B:** Greater reported importance of childhood religious adherence (`externalreligion`) is associated with higher adult happiness relative to childhood (`I am happier as an adult than I was in childhood (h33e6gg)`).\\n3. **H-C:** Respondents reporting higher current net worth brackets (`networth`) are more satisfied with their work or career (`I am satisfied with my work/career life (z0mhd63)`).\\n4. **H-D:** Self-reported depression tendency (`I tend to suffer from depression (wz901dj)`) is positively associated with stress sensitivity (`I'm quite sensitive to stress (qhyti2r)-neg`).\\n5. **H-E:** Older respondents (`selfage`) report higher counts of lifetime sexual partners (`How many people have you had sex with? (ewvvaz2)`).\\n\\n## Priority Hypotheses for Immediate Work\\n### H1 (Priority: High)\\n- **Statement:** The weighted proportion of active religious practice (`religion`) varies by biological sex (`biomale`).\\n- **Estimand:** Difference in weighted proportions male vs. non-male.\\n- **Approach:**\\n  - Confirm weight and design variables from `docs/survey_design.yaml`.\\n  - Recode `religion` as an indicator for any active practice (`religion > 0`) to align with survey response gradations.\\n  - Use survey-weighted proportion estimates with 95% confidence intervals (Taylor linearization initially).\\n  - Apply privacy guardrails by suppressing any subgroup estimate with n < 10.\\n  - Implement deterministic workflow via `python scripts/analyze_h1_religion_by_biomale.py --csv childhoodbalancedpublic_original.csv --config config/agent_config.yaml --design docs/survey_design.yaml --out tables/h1_religion_by_biomale.csv --diff-out tables/h1_religion_by_biomale_diff.csv --manifest artifacts/h1_religion_by_biomale_manifest.json`.\\n- **Diagnostics:** Assess missingness in `religion` and `biomale`; compare unweighted vs. weighted proportions.\\n\\n### H2 (Priority: Medium)\\n- **Statement:** Higher childhood religious strictness (`externalreligion`) is associated with greater adult happiness change (`h33e6gg`).\\n- **Estimand:** Survey-weighted difference in mean adult-vs-childhood happiness scores across terciles of `externalreligion`.\\n- **Approach:**\\n  - Confirm scale direction for both variables using the codebook.\\n  - Construct deterministic terciles of `externalreligion` via ordinal breakpoints (0 | 1-2 | 3-4) under SRS assumptions.\\n  - Estimate SRS means and Bonferroni-adjusted pairwise differences for `On average, I am happier as an adult than I was in childhood (h33e6gg)`.\\n  - Suppress cells where any tercile has <10 observations contributing to the estimate.\\n  - Regeneration command (seed=20251016):  \\n    `python scripts/analyze_h2_religion_strictness_vs_happiness.py --csv childhoodbalancedpublic_original.csv --config config/agent_config.yaml --design docs/survey_design.yaml --out tables/h2_happiness_by_religion_strictness.csv --diff-out tables/h2_happiness_by_religion_strictness_diff.csv --manifest artifacts/h2_religion_strictness_vs_happiness_manifest.json`\\n- **Diagnostics:** Explore missing data patterns and perform sensitivity checks with unweighted comparisons.\\n\\n### H3 (Priority: Medium)\\n- **Statement:** Higher current net worth brackets (`networth`) are associated with higher work/career satisfaction (`I am satisfied with my work/career life (or lack thereof) (z0mhd63)`).\\n- **Estimand:** Difference in SRS mean satisfaction scores relative to the lowest net worth bracket, plus monotonic trend diagnostics.\\n- **Approach:**\\n  - Map numeric net worth recodes to modal bracket labels using the original survey wording (`Your CURRENT net worth is closest to (nhoz8ia)`).\\n  - Drop respondents missing `networth` or satisfaction values; enforce minimum cell size (n \\u2265 10) for every bracket.\\n  - Estimate SRS means, standard errors, and 95% CIs by net worth bracket; compute mean differences versus the lowest bracket and report Spearman/Pearson correlations.\\n  - Deterministic workflow (seed = 20251016):  \\n    `python scripts/analyze_h3_networth_vs_work_satisfaction.py --csv childhoodbalancedpublic_original.csv --config config/agent_config.yaml --design docs/survey_design.yaml --out tables/h3_networth_work_satisfaction.csv --diff-out tables/h3_networth_work_satisfaction_diff.csv --manifest artifacts/h3_networth_vs_work_manifest.json`\\n- **Diagnostics:** All net worth brackets exceed the privacy threshold (minimum n = 235). Correlation diagnostics retained in the manifest; revisit once calibrated weights become available.\\n\\n## Analysis Workflow Outline\\n1. Validate design information (`T-001`).\\n2. Produce weighted descriptive summaries for variables in H1 and H2 (`T-002`).\\n3. Generate deterministic H1 proportion estimates via `scripts/analyze_h1_religion_by_biomale.py` and archive manifests.\\n4. Develop deterministic H2 tercile comparisons via `scripts/analyze_h2_religion_strictness_vs_happiness.py`.\\n5. Prototype H3 net worth vs. work satisfaction analysis via `scripts/analyze_h3_networth_vs_work_satisfaction.py` and review trend diagnostics.\\n6. Draft shell scripts for deterministic data processing once design metadata confirmed.\\n7. Update manuscript (`manuscript.tex`) after each major analytic milestone to mirror Markdown findings.\\n\\n## Privacy and Quality Control\\n- Enforce minimum cell size of 10 in all tables and plots.\\n- Document QA steps in `qc/data_checks.md` with pass/fail status and regeneration commands.\\n- Use deterministic seeds for any resampling or imputation; record seeds alongside outputs.\\n\\n## Manuscript Coordination\\n- Maintain synchronized updates between Markdown narratives (e.g., `reports/`) and `manuscript.tex`.\\n- Record versioned changes in git immediately after producing major artifacts (state updates, PAP revisions, hypotheses registry adjustments).\\n\\n## Outstanding TODOs Before Freezing PAP\\n- Populate `docs/codebook.json` with full variable metadata.\\n- Confirm survey design elements and update `config/agent_config.yaml` defaults.\\n- Prototype analysis scripts to automate the above regeneration command.\\n- Revisit hypotheses list after exploratory summaries to ensure feasibility and refine estimands.\\n\"",
      "mode": "text"
    },
    {
      "path": "reports/findings_summary.md",
      "content": "\"# Findings Summary: Religion Practice, Happiness, and Economic Standing (Loop 11)\\n\\n- Prepared: 2025-11-04T20:35:05Z\\n- Seed: 20251016 (from `config/agent_config.yaml`)\\n- Dataset: `childhoodbalancedpublic_original.csv`\\n- Privacy guardrail: suppress cells with n < 10 (all referenced results exceed this threshold).\\n\\n## Design Context\\n- Survey-weight metadata remain unavailable; analyses treat the file as a simple random sample (SRS) with Taylor linearized standard errors.\\n- Weighting placeholders in `docs/survey_design.yaml` and `config/agent_config.yaml` document this assumption and will be revised once calibrated weights, strata, and PSU identifiers arrive.\\n- Design checks and sponsor communications are logged in `reports/design_metadata_brief.md` and `reports/sponsor_follow_up.md`.\\n- Proxy calibration targets from the 2023 ACS (sex and age margins) now live in `docs/calibration_targets.yaml`. Deterministic pseudo-weights are generated via `python scripts/generate_pseudo_weights.py --csv childhoodbalancedpublic_original.csv --config config/agent_config.yaml --targets docs/calibration_targets.yaml --out tables/pseudo_weights.csv --manifest artifacts/pseudo_weight_manifest.json`; convergence diagnostics are recorded in `artifacts/pseudo_weight_manifest.json`.\\n\\n## H1: Active Religion Practice by Biological Sex\\n- Source tables: `tables/h1_religion_by_biomale.csv`, `tables/h1_religion_by_biomale_diff.csv` (manifest in `artifacts/h1_religion_by_biomale_manifest.json`).\\n- Weighted proportion of active practice (`religion > 0`):\\n  - Not biologically male (n = 5,931): 34.50% (SE 0.62%, 95% CI [33.29%, 35.71%]).\\n  - Biologically male (n = 8,512): 28.65% (SE 0.49%, 95% CI [27.69%, 29.61%]).\\n- Difference (male - non-male): -5.84 percentage points (SE 0.79, 95% CI [-7.39, -4.30]); non-male respondents report higher active practice.\\n\\n## H2: Childhood Religious Strictness vs. Adult Happiness Change\\n- Source tables: `tables/h2_happiness_by_religion_strictness.csv`, `tables/h2_happiness_by_religion_strictness_diff.csv` (manifest in `artifacts/h2_religion_strictness_vs_happiness_manifest.json`).\\n- Mean self-reported change in happiness (scale from survey instrument):\\n  - Tercile 1 (`externalreligion = 0`, n = 5,224): 0.779 (SE 0.027).\\n  - Tercile 2 (`externalreligion` in [1, 2], n = 5,801): 0.675 (SE 0.026).\\n  - Tercile 3 (`externalreligion` in [3,
```