```json
{
  "files": [
    {
      "path": "analysis/code/evaluate_anxiety_convergence.py",
      "content": "#!/usr/bin/env python3\n\"\"\"\nEvaluate convergent validity for the CSA anxiety outcome using companion affect items.\n\nRegeneration example:\npython analysis/code/evaluate_anxiety_convergence.py \\\n    --dataset data/clean/childhoodbalancedpublic_with_csa_indicator.csv \\\n    --config config/agent_config.yaml \\\n    --out-table tables/diagnostics/anxiety_convergence.csv \\\n    --out-md qc/anxiety_convergence.md \\\n    --seed 20251016\n\"\"\"\n\nfrom __future__ import annotations\n\nimport argparse\nimport math\nimport random\nimport warnings\nfrom dataclasses import dataclass\nfrom datetime import datetime, timezone\nfrom pathlib import Path\nfrom typing import Iterable, List, Sequence, Tuple\n\nimport numpy as np\nimport pandas as pd\nimport yaml\nfrom scipy.optimize import minimize_scalar\nfrom scipy.stats import norm, pearsonr, spearmanr, multivariate_normal\nfrom statsmodels.stats.multitest import fdrcorrection\n\n\nDEFAULT_OUTCOME = \"I tend to suffer from anxiety (npvfh98)-neg\"\nDEFAULT_COMPARATORS: tuple[str, ...] = (\n    \"I tend to suffer from depression (wz901dj)\",\n    \"I'm quite sensitive to stress (qhyti2r)-neg\",\n    \"I love myself (2l8994l)\",\n    \"I tend to be calm/peaceful (6e6zhy3)\",\n)\n\n# Expected association directions for interpretability checks.\nEXPECTED_DIRECTIONS = {\n    \"I tend to suffer from depression (wz901dj)\": \"positive\",\n    \"I'm quite sensitive to stress (qhyti2r)-neg\": \"positive\",\n    \"I love myself (2l8994l)\": \"negative\",\n    \"I tend to be calm/peaceful (6e6zhy3)\": \"negative\",\n}\n\n\n@dataclass(frozen=True)\nclass ReliabilitySet:\n    name: str\n    items: Sequence[Tuple[str, int]]\n\n\nRELIABILITY_SETS: tuple[ReliabilitySet, ...] = (\n    ReliabilitySet(\n        name=\"Negative affect triad (anxiety, depression, stress)\",\n        items=(\n            (DEFAULT_OUTCOME, 1),\n            (\"I tend to suffer from depression (wz901dj)\", 1),\n            (\"I'm quite sensitive to stress (qhyti2r)-neg\", 1),\n        ),\n    ),\n    ReliabilitySet(\n        name=\"Self-regulation composite (anxiety vs. reversed calm/self-love)\",\n        items=(\n            (DEFAULT_OUTCOME, 1),\n            (\"I love myself (2l8994l)\", -1),\n            (\"I tend to be calm/peaceful (6e6zhy3)\", -1),\n        ),\n    ),\n)\n\n\ndef parse_args() -> argparse.Namespace:\n    parser = argparse.ArgumentParser(\n        description=\"Compute convergent validity diagnostics for the anxiety outcome.\"\n    )\n    parser.add_argument(\"--dataset\", required=True, help=\"Input CSV dataset path.\")\n    parser.add_argument(\n        \"--config\", required=True, help=\"Path to config YAML with seed and thresholds.\"\n    )\n    parser.add_argument(\n        \"--out-table\",\n        required=True,\n        help=\"Destination CSV capturing correlation diagnostics.\",\n    )\n    parser.add_argument(\n        \"--out-md\",\n        required=True,\n        help=\"Destination Markdown file summarising findings.\",\n    )\n    parser.add_argument(\n        \"--out-json\",\n        default=None,\n        help=\"Optional JSON dump of intermediate statistics.\",\n    )\n    parser.add_argument(\n        \"--outcome\",\n        default=DEFAULT_OUTCOME,\n        help=\"Outcome column capturing anxiety tendency (neg-coded).\",\n    )\n    parser.add_argument(\n        \"--comparators\",\n        nargs=\"+\",\n        default=list(DEFAULT_COMPARATORS),\n        help=\"Comparator columns to test for convergent validity.\",\n    )\n    parser.add_argument(\n        \"--seed\",\n        type=int,\n        default=None,\n        help=\"Optional override for random seed (otherwise taken from config).\",\n    )\n    return parser.parse_args()\n\n\ndef load_config(path: Path) -> dict:\n    config = yaml.safe_load(path.read_text())\n    if not isinstance(config, dict):\n        raise ValueError(\"Configuration file must parse to a dictionary.\")\n    return config\n\n\ndef fisher_ci(r: float, n: int, alpha: float = 0.05) -> Tuple[float, float]:\n    if n <= 3 or abs(r) >= 1:\n        return float(\"nan\"), float(\"nan\")\n    z = 0.5 * math.log((1 + r) / (1 - r))\n    se = 1 / math.sqrt(n - 3)\n    z_crit = norm.ppf(1 - alpha / 2)\n    lower = z - z_crit * se\n    upper = z + z_crit * se\n    return math.tanh(lower), math.tanh(upper)\n\n\ndef safe_series(df: pd.DataFrame, cols: Iterable[str]) -> pd.DataFrame:\n    missing = [col for col in cols if col not in df.columns]\n    if missing:\n        joined = \", \".join(missing)\n        raise ValueError(f\"Dataset missing expected columns: {joined}\")\n    return df[list(cols)]\n\n\ndef _category_thresholds(counts: np.ndarray) -> np.ndarray:\n    proportions = counts / counts.sum()\n    cumulative = np.cumsum(proportions)[:-1]\n    # Guard against 0 or 1 probabilities pushing thresholds to infinities.\n    eps = 1e-6\n    cumulative = np.clip(cumulative, eps, 1 - eps)\n    return norm.ppf(cumulative)\n\n\ndef _bvn_cdf(x: float, y: float, rho: float) -> float:\n    if math.isinf(x) and x < 0:\n        return 0.0\n    if math.isinf(y) and y < 0:\n        return 0.0\n    if math.isinf(x) and x > 0 and math.isinf(y) and y > 0:\n        return 1.0\n\n    cov = np.array([[1.0, rho], [rho, 1.0]], dtype=float)\n    with warnings.catch_warnings():\n        warnings.filterwarnings(\"ignore\", category=RuntimeWarning)\n        value = multivariate_normal.cdf(\n            [x if not math.isinf(x) else np.sign(x) * 8.0,\n             y if not math.isinf(y) else np.sign(y) * 8.0],\n            mean=[0.0, 0.0],\n            cov=cov,\n        )\n    return float(value)\n\n\ndef _cell_probability(\n    lower: float, upper: float, lower_y: float, upper_y: float, rho: float\n) -> float:\n    a = _bvn_cdf(upper, upper_y, rho)\n    b = _bvn_cdf(lower, upper_y, rho)\n    c = _bvn_cdf(upper, lower_y, rho)\n    d = _bvn_cdf(lower, lower_y, rho)\n    prob = max(a - b - c + d, 0.0)\n    return prob\n\n\ndef estimate_polychoric(x: np.ndarray, y: np.ndarray) -> Tuple[float, str]:\n    \"\"\"Estimate the polychoric correlation between two ordinal variables.\"\"\"\n    data = pd.DataFrame({\"x\": x, \"y\": y}).dropna()\n    if data.empty:\n        raise ValueError(\"No complete cases available for polychoric estimation.\")\n\n    freq = (\n        pd.crosstab(data[\"x\"], data[\"y\"])\n        .sort_index(axis=0)\n        .sort_index(axis=1)\n        .astype(float)\n    )\n    row_counts = freq.sum(axis=1).values\n    col_counts = freq.sum(axis=0).values\n\n    x_thresholds = _category_thresholds(row_counts)\n    y_thresholds = _category_thresholds(col_counts)\n\n    # Append boundary infinities for interval calculations.\n    x_bounds = np.concatenate(([-np.inf], x_thresholds, [np.inf]))\n    y_bounds = np.concatenate(([-np.inf], y_thresholds, [np.inf]))\n    freq_values = freq.values\n\n    def neg_log_likelihood(rho: float) -> float:\n        if not (-0.999 < rho < 0.999):\n            return np.inf\n\n        log_likelihood = 0.0\n        for i in range(freq_values.shape[0]):\n            for j in range(freq_values.shape[1]):\n                lower_x = x_bounds[i]\n                upper_x = x_bounds[i + 1]\n                lower_y = y_bounds[j]\n                upper_y = y_bounds[j + 1]\n                prob = _cell_probability(lower_x, upper_x, lower_y, upper_y, rho)\n                prob = max(prob, 1e-12)\n                log_likelihood += freq_values[i, j] * math.log(prob)\n        return -log_likelihood\n\n    result = minimize_scalar(\n        neg_log_likelihood, bounds=(-0.995, 0.995), method=\"bounded\"\n    )\n\n    if not result.success:\n        return float(\"nan\"), f\"optimisation_failed:{result.status}\"\n\n    rho_hat = float(result.x)\n    return rho_hat, \"ok\"\n\n\ndef cronbach_alpha(matrix: pd.DataFrame) -> float:\n    if matrix.empty:\n        return float(\"nan\")\n    values = matrix.to_numpy(dtype=float)\n    k = values.shape[1]\n    if k < 2:\n        return float(\"nan\")\n    item_variances = values.var(axis=0, ddof=1)\n    total_variance = values.sum(axis=1).var(ddof=1)\n    if total_variance <= 0:\n        return float(\"nan\")\n    return (k / (k - 1)) * (1 - item_variances.sum() / total_variance)\n\n\ndef format_float(value: float, digits: int = 3) -> str:\n    if isinstance(value, str):\n        return value\n    if value is None or (isinstance(value, float) and math.isnan(value)):\n        return \"NA\"\n    return f\"{value:.{digits}f}\"\n\n\ndef build_markdown(\n    table: pd.DataFrame,\n    reliability_notes: List[str],\n    direction_notes: List[str],\n    seed: int,\n    outcome: str,\n    dataset: Path,\n    config: Path,\n) -> str:\n    timestamp = datetime.now(timezone.utc).isoformat()\n    lines = [\n        \"# Anxiety Convergent Validity Diagnostics\",\n        f\"Generated: {timestamp} | Seed: {seed}\",\n        \"\",\n        f\"- Outcome: `{outcome}`\",\n        f\"- Dataset: `{dataset}`\",\n        f\"- Config: `{config}`\",\n        \"\",\n        \"## Correlation Summary\",\n        \"| Comparator | Expected Direction | Direction OK | n | Pearson r | 95% CI | Spearman ρ | Polychoric r | q (BH, Pearson) | Notes |\",\n        \"|---|---|---|---|---|---|---|---|---|---|\",\n    ]\n\n    for _, row in table.iterrows():\n        ci = f\"[{format_float(row['pearson_ci_low'])}, {format_float(row['pearson_ci_high'])}]\"\n        lines.append(\n            f\"| `{row['comparator']}` | {row['direction_expected']} | \"\n            f\"{row['direction_consistent']} | {int(row['n_complete'])} | \"\n            f\"{format_float(row['pearson_r'])} | {ci} | {format_float(row['spearman_rho'])} | \"\n            f\"{format_float(row['polychoric_r'])} | {format_float(row['pearson_q_value'])} | {row['notes']} |\"\n        )\n\n    lines.extend(\n        [\n            \"\",\n            \"## Reliability Benchmarks\",\n        ]\n    )\n\n    if reliability_notes:\n        lines.extend(f\"- {note}\" for note in reliability_notes)\n    else:\n        lines.append(\"- No reliability sets evaluated (insufficient data).\")\n\n    lines.extend([\"\", \"## Interpretation\"])\n\n    if direction_notes:\n        lines.extend(f\"- {note}\" for note in direction_notes)\n    else:\n        lines.append(\n            \"- All comparator directions align with theoretical expectations for convergent validity.\"\n        )\n\n    lines.append(\n        \"- q-values apply Benjamini–Hochberg (q=0.05) across Pearson correlations within this diagnostic family.\"\n    )\n\n    lines.extend(\n        [\n            \"\",\n            \"## Reproducibility\",\n            f\"- Command: `python analysis/code/evaluate_anxiety_convergence.py --dataset {dataset} --config {config} \"\n            f\"--out-table tables/diagnostics/anxiety_convergence.csv --out-md qc/anxiety_convergence.md --seed {seed}`\",\n        ]\n    )\n\n    return \"\\n\".join(lines)\n\n\ndef main() -> None:\n    args = parse_args()\n\n    dataset_path = Path(args.dataset)\n    config_path = Path(args.config)\n    out_table_path = Path(args.out_table)\n    out_md_path = Path(args.out_md)\n    outcome = args.outcome\n    comparators = list(dict.fromkeys(args.comparators))  # preserve order, remove dups\n\n    config = load_config(config_path)\n    seed = int(args.seed if args.seed is not None else config.get(\"seed\", 0))\n    q_alpha = float(config.get(\"fdr_q\", 0.05))\n    threshold = int(config.get(\"small_cell_threshold\", 10))\n\n    random.seed(seed)\n    np.random.seed(seed)\n\n    df = pd.read_csv(dataset_path, low_memory=False)\n    data = safe_series(df, [outcome] + comparators)\n\n    results = []\n    pearson_pvalues = []\n\n    for comparator in comparators:\n        pair = data[[outcome, comparator]].dropna()\n        n_complete = int(pair.shape[0])\n        if n_complete < threshold:\n            raise ValueError(\n                f\"Complete cases for {comparator} below suppression threshold ({n_complete} < {threshold}).\"\n            )\n\n        pearson_r, pearson_p = pearsonr(pair[outcome], pair[comparator])\n        spearman_rho, spearman_p = spearmanr(pair[outcome], pair[comparator])\n        ci_low, ci_high = fisher_ci(pearson_r, n_complete)\n\n        polychoric_r, status = estimate_polychoric(\n            pair[outcome].to_numpy(), pair[comparator].to_numpy()\n        )\n\n        expected_direction = EXPECTED_DIRECTIONS.get(comparator, \"unspecified\")\n        direction_consistent = True\n        if expected_direction == \"positive\":\n            direction_consistent = pearson_r >= 0\n        elif expected_direction == \"negative\":\n            direction_consistent = pearson_r <= 0\n\n        notes = \"pairwise complete; polychoric OK\"\n        if status != \"ok\":\n            notes = f\"pairwise complete; polychoric status={status}\"\n        if (\n            expected_direction in {\"positive\", \"negative\"}\n            and not direction_consistent\n        ):\n            notes = (\n                f\"{notes}; pearson sign != expected {expected_direction}\"\n            )\n\n        results.append(\n            {\n                \"outcome\": outcome,\n                \"comparator\": comparator,\n                \"direction_expected\": expected_direction,\n                \"direction_consistent\": direction_consistent,\n                \"n_complete\": n_complete,\n                \"pearson_r\": pearson_r,\n                \"pearson_ci_low\": ci_low,\n                \"pearson_ci_high\": ci_high,\n                \"pearson_p_value\": pearson_p,\n                \"spearman_rho\": spearman_rho,\n                \"spearman_p_value\": spearman_p,\n                \"polychoric_r\": polychoric_r,\n                \"notes\": notes,\n            }\n        )\n        pearson_pvalues.append(pearson_p)\n\n    # Apply Benjamini–Hochberg FDR correction across Pearson correlations.\n    pearson_q_values = [float(\"nan\")] * len(results)\n    if any(not math.isnan(p) for p in pearson_pvalues):\n        valid_indices = [i for i, p in enumerate(pearson_pvalues) if not math.isnan(p)]\n        valid_ps = [pearson_pvalues[i] for i in valid_indices]\n        _, q_vals = fdrcorrection(valid_ps, alpha=q_alpha)\n        for idx, q_val in zip(valid_indices, q_vals):\n            pearson_q_values[idx] = float(q_val)\n\n    for result, q_val in zip(results, pearson_q_values):\n        result[\"pearson_q_value\"] = q_val\n\n    table = pd.DataFrame(results)\n    table = table[\n        [\n            \"outcome\",\n            \"comparator\",\n            \"direction_expected\",\n            \"direction_consistent\",\n            \"n_complete\",\n            \"pearson_r\",\n            \"pearson_ci_low\",\n            \"pearson_ci_high\",\n            \"pearson_p_value\",\n            \"pearson_q_value\",\n            \"spearman_rho\",\n            \"spearman_p_value\",\n            \"polychoric_r\",\n            \"notes\",\n        ]\n    ]\n\n    out_table_path.parent.mkdir(parents=True, exist_ok=True)\n    table.to_csv(out_table_path, index=False)\n\n    # Reliability calculations.\n    reliability_notes: List[str] = []\n    for rel_set in RELIABILITY_SETS:\n        cols = [name for name, _ in rel_set.items]\n        oriented = []\n        missing_cols = [col for col in cols if col not in data.columns]\n        if missing_cols:\n            reliability_notes.append(\n                f\"{rel_set.name}: skipped (missing columns: {', '.join(missing_cols)})\"\n            )\n            continue\n\n        oriented_frames = []\n        for col, direction in rel_set.items:\n            oriented_frames.append(data[col] * direction)\n        matrix = pd.concat(oriented_frames, axis=1, keys=[c for c, _ in rel_set.items])\n        matrix = matrix.dropna()\n        complete_n = int(matrix.shape[0])\n        if complete_n < threshold:\n            reliability_notes.append(\n                f\"{rel_set.name}: insufficient complete cases ({complete_n} < {threshold}).\"\n            )\n            continue\n        alpha = cronbach_alpha(matrix)\n        if math.isnan(alpha):\n            reliability_notes.append(\n                f\"{rel_set.name}: Cronbach's α unavailable (zero variance).\"\n            )\n            continue\n        if alpha < 0:\n            reliability_notes.append(\n                f\"{rel_set.name}: Cronbach's α = {format_float(alpha)} \"\n                f\"(n={complete_n}; negative suggests opposing construct directions).\"\n            )\n            continue\n        reliability_notes.append(\n            f\"{rel_set.name}: Cronbach's α = {format_float(alpha)} (n={complete_n}).\"\n        )\n\n    direction_notes: List[str] = []\n    directional_mask = table[\"direction_expected\"].isin({\"positive\", \"negative\"})\n    if directional_mask.any():\n        mismatched = table[directional_mask & (~table[\"direction_consistent\"])]\n        if mismatched.empty:\n            direction_notes.append(\n                \"Pearson correlations align with expected directions for all comparators.\"\n            )\n        else:\n            for _, row in mismatched.iterrows():\n                observed_sign = \"positive\" if row[\"pearson_r\"] > 0 else \"negative\"\n                direction_notes.append(\n                    f\"{row['comparator']} correlation is {format_float(row['pearson_r'])} \"\n                    f\"(observed {observed_sign}, expected {row['direction_expected']}).\"\n                )\n\n    markdown = build_markdown(\n        table=table,\n        reliability_notes=reliability_notes,\n        direction_notes=direction_notes,\n        seed=seed,\n        outcome=outcome,\n        dataset=dataset_path,\n        config=config_path,\n    )\n    out_md_path.parent.mkdir(parents=True, exist_ok=True)\n    out_md_path.write_text(markdown)\n\n\nif __name__ == \"__main__\":\n    main()\n",
      "mode": "text"
    },
    {
      "path": "tables/diagnostics/anxiety_convergence.csv",
      "content": "outcome,comparator,direction_expected,direction_consistent,n_complete,pearson_r,pearson_ci_low,pearson_ci_high,pearson_p_value,pearson_q_value,spearman_rho,spearman_p_value,polychoric_r,notes\nI tend to suffer from anxiety (npvfh98)-neg,I tend to suffer from depression (wz901dj),positive,True,14437,0.6145169065978577,0.6042618143158095,0.6245684410385798,0.0,0.0,0.60974915192681,0.0,0.6653799675412576,pairwise complete; polychoric OK\nI tend to suffer from anxiety (npvfh98)-neg,I'm quite sensitive to stress (qhyti2r)-neg,positive,True,14437,0.6173053447180257,0.6071063817784575,0.6273009544996051,0.0,0.0,0.6222240905532099,0.0,0.6741069751431313,pairwise complete; polychoric OK\nI tend to suffer from anxiety (npvfh98)-neg,I love myself (2l8994l),negative,False,14436,0.36819056343912543,0.3540038987007893,0.3822078281290403,0.0,0.0,0.3739592297334597,0.0,0.4085275083300703,pairwise complete; polychoric OK; pearson sign != expected negative\nI tend to suffer from anxiety (npvfh98)-neg,I tend to be calm/peaceful (6e6zhy3),negative,False,14436,0.38270955482431335,0.36869847457586785,0.3965467752384164,0.0,0.0,0.38931903499305964,0.0,0.43118771005417156,pairwise complete; polychoric OK; pearson sign != expected negative\n",
      "mode": "text"
    },
    {
      "path": "qc/anxiety_convergence.md",
      "content": "# Anxiety Convergent Validity Diagnostics\nGenerated: 2025-11-04T20:35:47.415120+00:00 | Seed: 20251016\n\n- Outcome: `I tend to suffer from anxiety (npvfh98)-neg`\n- Dataset: `data/clean/childhoodbalancedpublic_with_csa_indicator.csv`\n- Config: `config/agent_config.yaml`\n\n## Correlation Summary\n| Comparator | Expected Direction | Direction OK | n | Pearson r | 95% CI | Spearman ρ | Polychoric r | q (BH, Pearson) | Notes |\n|---|---|---|---|---|---|---|---|---|---|\n| `I tend to suffer from depression (wz901dj)` | positive | True | 14437 | 0.615 | [0.604, 0.625] | 0.610 | 0.665 | 0.000 | pairwise complete; polychoric OK |\n| `I'm quite sensitive to stress (qhyti2r)-neg` | positive | True | 14437 | 0.617 | [0.607, 0.627] | 0.622 | 0.674 | 0.000 | pairwise complete; polychoric OK |\n| `I love myself (2l8994l)` | negative | False | 14436 | 0.368 | [0.354, 0.382] | 0.374 | 0.409 | 0.000 | pairwise complete; polychoric OK; pearson sign != expected negative |\n| `I tend to be calm/peaceful (6e6zhy3)` | negative | False | 14436 | 0.383 | [0.369, 0.397] | 0.389 | 0.431 | 0.000 | pairwise complete; polychoric OK; pearson sign != expected negative |\n\n## Reliability Benchmarks\n- Negative affect triad (anxiety, depression, stress): Cronbach's α = 0.800 (n=14437).\n- Self-regulation composite (anxiety vs. reversed calm/self-love): Cronbach's α = -0.682 (n=14435; negative suggests opposing construct directions).\n\n## Interpretation\n- I love myself (2l8994l) correlation is 0.368 (observed positive, expected negative).\n- I tend to be calm/peaceful (6e6zhy3) correlation is 0.383 (observed positive, expected negative).\n- q-values apply Benjamini–Hochberg (q=0.05) across Pearson correlations within this diagnostic family.\n\n## Reproducibility\n- Command: `python analysis/code/evaluate_anxiety_convergence.py --dataset data/clean/childhoodbalancedpublic_with_csa_indicator.csv --config config/agent_config.yaml --out-table tables/diagnostics/anxiety_convergence.csv --out-md qc/anxiety_convergence.md --seed 20251016`\n",
      "mode": "text"
    },
    {
      "path": "analysis/decision_log.csv",
      "content": "ts,action,inputs,rationale_short,code_path,outputs,status\n2025-11-03T20:29:10Z,survey_design_validation,childhoodbalancedpublic_original.csv;docs/survey_design.yaml;config/agent_config.yaml,Validated sampling design metadata; defaulted to SRS.,analysis/code/validate_survey_design.py,qc/survey_design_validation.md,success\n2025-11-03T20:34:20Z,eda_outcomes,childhoodbalancedpublic_original.csv;docs/codebook.json;config/agent_config.yaml,Generated exploratory weighted outcome summaries.,analysis/code/eda_weighted_summaries.py,tables/exploratory_outcome_summary.csv;tables/exploratory_outcome_distribution.csv,success\n2025-11-03T20:48:21Z,schema_alignment,childhoodbalancedpublic_original.csv;docs/codebook.json;config/agent_config.yaml,Refreshed codebook notes to current timestamp.,analysis/code/align_codebook_schema.py,docs/codebook.json;qc/schema_alignment.md,success\n2025-11-03T20:50:32Z,schema_alignment,childhoodbalancedpublic_original.csv;docs/codebook.json;config/agent_config.yaml,Streamlined codebook to summary-only metadata for disclosure control.,analysis/code/align_codebook_schema.py,docs/codebook.json;qc/schema_alignment.md,success\n2025-11-03T20:56:41Z,missingness_profile,childhoodbalancedpublic_original.csv;docs/codebook.json;config/agent_config.yaml;analysis/hypotheses.csv,\"Profiled hypothesis missingness; suppressed <10 cells.\",analysis/code/profile_missingness.py,tables/missingness_profile.csv;tables/missingness_patterns.csv;tables/missingness_profile.meta.json,success\n2025-11-03T21:06:24Z,derive_csa_indicator,data/raw/childhoodbalancedpublic_original.csv;config/agent_config.yaml;docs/codebook.json;analysis/pre_analysis_plan.md,Derived CSA indicator and expanded robustness plans.,analysis/code/derive_csa_indicator.py,data/clean/childhoodbalancedpublic_with_csa_indicator.csv;tables/csa_indicator_distribution.csv;docs/codebook.json;analysis/pre_analysis_plan.md;analysis/hypotheses.csv;notebooks/research_notebook.md;qc/data_checks.md,success\n2025-11-03T21:35:00Z,support_feasibility,data/clean/childhoodbalancedpublic_with_csa_indicator.csv;config/agent_config.yaml,Profiled social support coverage; recommended alternate item.,analysis/code/social_support_missingness.py,tables/social_support_missingness.csv;qc/social_support_feasibility.md;analysis/hypotheses.csv;notebooks/research_notebook.md;artifacts/state.json,success\n2025-11-03T22:05:00Z,instrument_equivalence,data/clean/childhoodbalancedpublic_with_csa_indicator.csv;config/agent_config.yaml;docs/codebook.json;analysis/hypotheses.csv,\"Verified social-support instrument alignment and pivoted predictor to 71mn55g.\",analysis/code/verify_social_support_equivalence.py,tables/social_support_equivalence_summary.csv;tables/social_support_equivalence_distributions.csv;tables/social_support_instrument_overlap.csv;qc/social_support_equivalence.md;docs/codebook.json;analysis/hypotheses.csv;analysis/pre_analysis_plan.md;notebooks/research_notebook.md;artifacts/state.json,success\n2025-11-03T22:45:00Z,confirmatory_model_skeleton,data/clean/childhoodbalancedpublic_with_csa_indicator.csv;config/agent_config.yaml;docs/survey_design.yaml;analysis/hypotheses.csv;analysis/pre_analysis_plan.md,\"Drafted confirmatory OLS skeleton and updated PAP for freeze readiness.\",analysis/code/confirmatory_models.py,analysis/code/confirmatory_models.py;analysis/pre_analysis_plan.md;analysis/hypotheses.csv;notebooks/research_notebook.md;artifacts/state.json,success\n2025-11-04T10:06:30Z,pap_freeze,analysis/pre_analysis_plan.md;papers/main/MANIFEST.md;config/agent_config.yaml;analysis/code/update_repro_checkpoints.py,Froze PAP and refreshed reproducibility checkpoints.,analysis/code/update_repro_checkpoints.py,analysis/pre_analysis_plan.md;papers/main/MANIFEST.md;artifacts/session_info.txt;artifacts/checksums.json;notebooks/research_notebook.md;analysis/code/update_repro_checkpoints.py,success\n2025-11-04T10:19:29+00:00,confirmatory_analysis,data/clean/childhoodbalancedpublic_with_csa_indicator.csv;config/agent_config.yaml;docs/survey_design.yaml;analysis/code/confirmatory_models.py,Fixed HC3 parameter indexing and executed PAP OLS for HYP-001/003 (seed 20251016).,analysis/code/confirmatory_models.py,analysis/results.csv;analysis/code/confirmatory_models.py,success\n2025-11-04T10:19:29+00:00,fdr_adjustment,analysis/results.csv;analysis/hypotheses.csv;config/agent_config.yaml,Applied Benjamini-Hochberg q-values to confirmatory hypotheses.,analysis/code/fdr_adjust.py,analysis/results.csv;tables/fdr_adjustment_confirmatory.csv,success\n2025-11-04T10:30:26Z,planning_doc,analysis/results.csv;analysis/hypotheses.csv;config/agent_config.yaml;analysis/code/fdr_adjust.py;analysis/code/run_robustness_checks.py,Documented deterministic FDR+robustness workflow.,analysis/fdr_robustness_execution_plan.md,analysis/fdr_robustness_execution_plan.md;notebooks/research_notebook.md,success\n2025-11-04T10:38:43Z,robustness_reporting,analysis/results.csv;tables/robustness/robustness_checks_summary.csv,Flagged robustness passes and confidence ratings; synced reporting.,manual,analysis/results.csv;reports/findings_v0.4.md;papers/main/manuscript.tex;notebooks/research_notebook.md,success\n2025-11-04T14:05:00Z,robustness_synthesis,analysis/results.csv;tables/robustness/robustness_checks_summary.csv;config/agent_config.yaml,Summarised robustness QC outputs and scheduled CSA diagnostics.,manual,qc/robustness_summary.md;analysis/csa_anxiety_diagnostics_plan.md;notebooks/research_notebook.md;artifacts/state.json,success\n2025-11-04T14:05:00Z,robustness_synthesis,analysis/results.csv;tables/robustness/robustness_checks_summary.csv;config/agent_config.yaml,Summarised robustness QC outputs and scheduled CSA diagnostics.,manual,qc/robustness_summary.md;analysis/csa_anxiety_diagnostics_plan.md;notebooks/research_notebook.md;artifacts/state.json;papers/main/MANIFEST.md,success\n2025-11-04T20:35:47Z,anxiety_convergence,data/clean/childhoodbalancedpublic_with_csa_indicator.csv;config/agent_config.yaml;analysis/code/evaluate_anxiety_convergence.py,Ran convergent validity correlations + polychoric estimators for anxiety Module M3.,analysis/code/evaluate_anxiety_convergence.py,tables/diagnostics/anxiety_convergence.csv;qc/anxiety_convergence.md,success\n",
      "mode": "text"
    },
    {
      "path": "notebooks/research_notebook.md",
      "content": "# Research Notebook\nUpdated: 2025-11-04T20:35:47Z | Seed: 20251016\n\nReproducibility: run `python analysis/code/bootstrap_setup.py`; env info in `artifacts/session_info.txt`; checksums in `artifacts/checksums.json`.\n\nHypotheses: HYP-001 childhood class ↑ self-love; HYP-002 current class ↓ depression; HYP-003 CSA ↑ anxiety; HYP-004 support ↑ self-love.\n\n2025-11-03T20:29Z — Survey design validation confirms no sampling weights/strata/clusters present in `childhoodbalancedpublic_original.csv`; working under simple random sampling assumption. See `qc/survey_design_validation.md` regenerated via `python analysis/code/validate_survey_design.py`.\n\n2025-11-03T20:34Z (Exploratory) — Generated outcome distributions under SRS assumption via\\\n `python analysis/code/eda_weighted_summaries.py --dataset childhoodbalancedpublic_original.csv --codebook docs/codebook.json --config config/agent_config.yaml --out-summary tables/exploratory_outcome_summary.csv --out-distribution tables/exploratory_outcome_distribution.csv`.\\\n Key findings: self-love skews positive (median=1), while depression/anxiety skew negative (median -1). All categories exceed the small-cell threshold (10). Outputs: `tables/exploratory_outcome_summary.csv`, `tables/exploratory_outcome_distribution.csv`.\n\nTODO: document literature and exploratory findings (labelled \"Exploratory\"); derive CSA indicator prior to PAP freeze. Prepare `papers/main/MANIFEST.md` when manuscript drafting begins.\n\n2025-11-03T20:50Z — Schema alignment completed via \\\n`python analysis/code/align_codebook_schema.py --dataset childhoodbalancedpublic_original.csv --codebook-in docs/codebook.json --codebook-out docs/codebook.json`.\\\nValidated storage types, allowed ranges, and missingness for six analysis variables; suppressed small cells (<10) and now omit detailed frequency tables to avoid sparse tail disclosure. Details recorded in `qc/schema_alignment.md`.\n\n2025-11-03T20:56Z (QC) — Profiled hypothesis-relevant missingness via \\\n`python analysis/code/profile_missingness.py --dataset childhoodbalancedpublic_original.csv --codebook docs/codebook.json --hypotheses analysis/hypotheses.csv --config config/agent_config.yaml --out-csv tables/missingness_profile.csv --out-patterns tables/missingness_patterns.csv`.\\\n Suppressed cell counts <10; see `tables/missingness_profile.csv` (+ `.meta.json`) and `tables/missingness_patterns.csv`. Social support predictor `In general, people in my *current* social circles tend treat me really well (tmt46e6)` exhibits 97.35% missingness—flagged for feasibility review. At that point `CSA_score_indicator` was absent in raw data, motivating derivation task T-006 prior to PAP freeze.\n\n2025-11-03T21:05Z (Derived) — Established canonical data folders (`data/raw`, `data/clean`) and derived CSA exposure indicator via \\\n`python analysis/code/derive_csa_indicator.py --dataset data/raw/childhoodbalancedpublic_original.csv --out-dataset data/clean/childhoodbalancedpublic_with_csa_indicator.csv --out-distribution tables/csa_indicator_distribution.csv --config config/agent_config.yaml --codebook-in docs/codebook.json --codebook-out docs/codebook.json`.\\\nOutput dataset stored at `data/clean/childhoodbalancedpublic_with_csa_indicator.csv`; distribution table `tables/csa_indicator_distribution.csv` confirms 22.31% report any CSA (no cells <10). Updated `docs/codebook.json` with new binary predictor metadata and refreshed `artifacts/checksums.json`. PAP robustness section expanded for HYP-001/HYP-003 (see `analysis/pre_analysis_plan.md`).\n\n2025-11-03T21:35Z (Exploratory) — Assessed feasibility of the social support predictor for HYP-004 via \\\n`python analysis/code/social_support_missingness.py --dataset data/clean/childhoodbalancedpublic_with_csa_indicator.csv --out-csv tables/social_support_missingness.csv --config config/agent_config.yaml`.\\\n Key finding: original item (`...tend treat me really well (tmt46e6)`) covers only 383 respondents (97.35% missing), while an instrument twin (`...tend to treat me really well (71mn55g)`) covers 14,054 respondents. Responses do not overlap, suggesting form-version routing. Recommendation logged in `qc/social_support_feasibility.md` to pivot HYP-004 to the high-coverage item pending instrument confirmation.\n\n2025-11-03T22:05Z (QC) — Verified instrument equivalence across the tmt46e6 and 71mn55g social-support items via \\\n`python analysis/code/verify_social_support_equivalence.py --dataset data/clean/childhoodbalancedpublic_with_csa_indicator.csv --out-summary tables/social_support_equivalence_summary.csv --out-distribution tables/social_support_equivalence_distributions.csv --out-overlap tables/social_support_instrument_overlap.csv --config config/agent_config.yaml --columns \"In general, people in my *current* social circles tend treat me really well (tmt46e6)\" \"In general, people in my *current* social circles tend to treat me really well (71mn55g)\"`.\\\n Findings: identical 7-point scales (−3 to +3), shared prompt wording apart from insertion of “to,” and mutually exclusive routing (no respondents with both non-missing). Distribution tables suppress cells <10 as required. Documented evidence in `qc/social_support_equivalence.md`; updated codebook and hypothesis registry to pivot HYP-004 to instrument 71mn55g.\n\n2025-11-03T22:45Z (Planning) — Drafted confirmatory model equations and executable skeleton via \\\n`python analysis/code/confirmatory_models.py --dataset data/clean/childhoodbalancedpublic_with_csa_indicator.csv --config config/agent_config.yaml --survey-design docs/survey_design.yaml --hypotheses HYP-001 HYP-003 --results-csv analysis/results.csv --overwrite`.\\\n Outcome: PAP now records explicit model statements for HYP-001 and HYP-003, and hypothesis registry flags them `in_PAP`. The script writes deterministic HC3 OLS outputs seeded at 20251016 and will feed `analysis/results.csv` post-freeze. Next step: freeze PAP and tag commit prior to confirmatory execution.\n\n2025-11-04T10:06Z (Checkpoint) — Froze PAP (`analysis/pre_analysis_plan.md`) for HYP-001 & HYP-003 after confirming code paths and SRS rationale; logged regeneration commands and seed usage. Refreshed reproducibility checkpoints with \\\n`python analysis/code/update_repro_checkpoints.py --config config/agent_config.yaml --data data/raw/childhoodbalancedpublic_original.csv --data data/clean/childhoodbalancedpublic_with_csa_indicator.csv`, producing updated `artifacts/session_info.txt` and `artifacts/checksums.json`. `papers/main/MANIFEST.md` now references the frozen timestamp and queued commands for FDR and robustness scripts. Next actions: execute confirmatory models per frozen command, then apply FDR and robustness pipeline.\n\n2025-11-04T10:17Z (Confirmatory) — Patched `analysis/code/confirmatory_models.py` to align HC3 outputs with labeled exogenous names, then executed the frozen command: \\\n`python analysis/code/confirmatory_models.py --dataset data/clean/childhoodbalancedpublic_with_csa_indicator.csv --config config/agent_config.yaml --survey-design docs/survey_design.yaml --results-csv analysis/results.csv --hypotheses HYP-001 HYP-003 --overwrite`. \\\nOutputs: `analysis/results.csv` (timestamp 2025-11-04T10:17:40Z) with HC3 OLS coefficients for HYP-001 (β = 0.181, SE = 0.012) and HYP-003 (β = −0.491, SE = 0.037); seed 20251016 logged in-file. Pending robustness checks remain flagged `N`.\n\n2025-11-04T10:18Z (Adjustment) — Applied Benjamini–Hochberg corrections via \\\n`python analysis/code/fdr_adjust.py --results analysis/results.csv --hypotheses analysis/hypotheses.csv --config config/agent_config.yaml --family-scope confirmatory --audit-table tables/fdr_adjustment_confirmatory.csv`. \\\n`analysis/results.csv` now records q-values (equal to p due to two-test family), and `tables/fdr_adjustment_confirmatory.csv` archives the BH audit trace. Robustness automation remains queued (Task T-011 follow-up).\n\n2025-11-04T10:30Z (Planning) — Finalised Task T-011 by authoring `analysis/fdr_robustness_execution_plan.md`, detailing deterministic commands for BH adjustment and pre-registered robustness checks. \\\nDocumented combined execution command (FDR + robustness) and QC expectations; linked outputs (`tables/fdr_adjustment_confirmatory.csv`, `tables/robustness/robustness_checks_summary.csv`, `qc/hyp-*.md`) and seed 20251016. Notebook entry ensures reproducibility trace to the plan.\n\n2025-11-04T10:38Z (Confirmatory Reporting) — Reviewed `tables/robustness/robustness_checks_summary.csv` and updated `analysis/results.csv` (robustness_passed, limitations, confidence ratings) to reflect pre-registered checks. Refreshed `reports/findings_v0.4.md` + `papers/main/manuscript.tex` to incorporate robustness narrative and BH-adjusted interpretation while keeping commands listed in reproducibility notes unchanged.\n\n2025-11-04T14:05Z (QC) — Synthesised robustness outputs in `qc/robustness_summary.md`, drawing on `tables/robustness/robustness_checks_summary.csv` (seed 20251016) to document effect stability across Helmert, ordinal-logit, z-score, tail-trim, and logistic recodes. Authored `analysis/csa_anxiety_diagnostics_plan.md` to scope convergent-validity and subgroup-interaction diagnostics (new tasks T-017, T-018). Updated `papers/main/MANIFEST.md` notes and backlog to reflect upcoming modules.\n\n2025-11-04T20:35Z (Diagnostics) — Executed convergent-validity module for the anxiety item via \\\n`python analysis/code/evaluate_anxiety_convergence.py --dataset data/clean/childhoodbalancedpublic_with_csa_indicator.csv --config config/agent_config.yaml --out-table tables/diagnostics/anxiety_convergence.csv --out-md qc/anxiety_convergence.md --seed 20251016`. \\\nFindings: strong positive correlations with depression (r=0.615) and stress (r=0.617) reinforce convergent validity; unexpectedly positive associations with self-love (r=0.368) and calm/peaceful (r=0.383) contradict hypothesised negative direction, flagged for qualitative review in T-018. Polychoric estimates mirror Pearson trends. Reliability: α=0.800 for the negative-affect triad; reversed self-regulation composite yields α=-0.682, indicating divergent constructs. Outputs archived in `tables/diagnostics/anxiety_convergence.csv` and `qc/anxiety_convergence.md`.\n",
      "mode": "text"
    },
    {
      "path": "papers/main/MANIFEST.md",
      "content": "# MANIFEST — Main Paper\nCreated: 2025-11-04T07:58:50Z | Seed: 20251016 (refreshed 2025-11-04T10:06:22Z)\n\n## Frozen PAP reference\n- File: `analysis/pre_analysis_plan.md`\n- Status: Frozen (2025-11-04T10:06:00Z)\n- Planned tag: `pap-freeze-20251104` (create immediately after committing freeze artifacts).\n- Regeneration: `python analysis/code/bootstrap_setup.py --artifact analysis/pre_analysis_plan.md` (archival diff only; do **not** overwrite frozen content post-freeze).\n\n## Data lineage\n1. Raw dataset (`data/raw/childhoodbalancedpublic_original.csv`) — checksum tracked in `artifacts/checksums.json`.\n2. Derived dataset (`data/clean/childhoodbalancedpublic_with_csa_indicator.csv`) — regenerate via  \n   `python analysis/code/derive_csa_indicator.py --dataset data/raw/childhoodbalancedpublic_original.csv --out-dataset data/clean/childhoodbalancedpublic_with_csa_indicator.csv --out-distribution tables/csa_indicator_distribution.csv --config config/agent_config.yaml --codebook-in docs/codebook.json --codebook-out docs/codebook.json`.\n\n## Confirmatory analyses\n- Command (frozen):  \n  `python analysis/code/confirmatory_models.py --dataset data/clean/childhoodbalancedpublic_with_csa_indicator.csv --config config/agent_config.yaml --survey-design docs/survey_design.yaml --hypotheses HYP-001 HYP-003 --results-csv analysis/results.csv --overwrite`\n- Expected outputs: `analysis/results.csv`, QC diagnostics under `qc/`, confirmatory tables under `tables/confirmatory/`, plots under `figures/confirmatory/`.\n- FDR adjustment command (to execute post-results, registered 2025-11-04T10:06Z):  \n  `python analysis/code/fdr_adjust.py --results analysis/results.csv --hypotheses analysis/hypotheses.csv --config config/agent_config.yaml --family-scope confirmatory --out analysis/results.csv --audit-table tables/fdr_adjustment_confirmatory.csv`  \n  Outputs: `analysis/results.csv` (q-values updated), `tables/fdr_adjustment_confirmatory.csv`.\n- Robustness automation command (to execute post-results, registered 2025-11-04T10:06Z):  \n  `python analysis/code/run_robustness_checks.py --dataset data/clean/childhoodbalancedpublic_with_csa_indicator.csv --config config/agent_config.yaml --qc-dir qc --tables-dir tables/robustness --hypotheses HYP-001 HYP-003`  \n  Outputs: `tables/robustness/robustness_checks_summary.{csv,json}`, QC notes (`qc/hyp-001_*`, `qc/hyp-003_*`).\n\n## Robustness synthesis\n- Memo: `qc/robustness_summary.md` (2025-11-04T14:05Z) — manual synthesis of `tables/robustness/robustness_checks_summary.{csv,json}`; no additional randomness beyond seed 20251016.\n- To refresh: rerun `python analysis/code/run_robustness_checks.py ...` above, then update the memo to reflect any new checks.\n\n## Manuscript parity\n- Markdown: `reports/findings_v0.4.md` (supersedes v0.3; retain prior versions for archival comparison)\n- LaTeX: `papers/main/manuscript.tex`\n- Guideline: Apply synchronized edits; record regeneration commands (e.g., `pandoc reports/findings_v0.4.md -o papers/main/manuscript.tex`) when automation is introduced. Update the changelog in Markdown when substantive revisions occur.\n\n## Environment checkpoints\n- Session info: `artifacts/session_info.txt` (updated 2025-11-04T10:06:22Z)\n- Checksums: `artifacts/checksums.json` (updated 2025-11-04T10:06:22Z)\n- Seed: `artifacts/seed.txt`\n- Git reference: record commit SHA after freeze commit/tag; append here during next update.\n\n## Outstanding tasks\n1. Develop CSA×(cis, age, class) interaction scripts and archive QC outputs (backlog T-018; WP2 in `analysis/csa_anxiety_diagnostics_plan.md`).\n2. Interpret unexpected positive associations between anxiety and self-regulation items from convergent diagnostics; determine reporting implications (queue follow-on task).\n\n## Measurement diagnostics plan\n- Command:  \n  `python analysis/code/create_csa_anxiety_measurement_plan.py --config config/agent_config.yaml --out-md qc/csa_anxiety_measurement_plan.md --generated-at 2025-11-04T13:15:00Z`\n- Output: `qc/csa_anxiety_measurement_plan.md`\n- DIF execution (2025-11-04T09:36Z):  \n  `python analysis/code/test_anxiety_dif.py --dataset data/clean/childhoodbalancedpublic_with_csa_indicator.csv --config config/agent_config.yaml --outcome \"I tend to suffer from anxiety (npvfh98)-neg\" --csa CSA_score_indicator --group gender --group-value-column gendermale --out-table tables/diagnostics/anxiety_dif.csv --out-md qc/anxiety_dif.md`  \n  Outputs: `tables/diagnostics/anxiety_dif.csv`, `qc/anxiety_dif.md`\n- Subgroup summary (2025-11-04T09:57Z):  \n  `python analysis/code/anxiety_subgroup_summary.py --dataset data/clean/childhoodbalancedpublic_with_csa_indicator.csv --config config/agent_config.yaml --out-table tables/diagnostics/anxiety_subgroup_summary.csv --out-md qc/anxiety_subgroup_summary.md`  \n  Outputs: `tables/diagnostics/anxiety_subgroup_summary.csv`, `qc/anxiety_subgroup_summary.md`\n- Convergent validity (2025-11-04T20:35Z):  \n  `python analysis/code/evaluate_anxiety_convergence.py --dataset data/clean/childhoodbalancedpublic_with_csa_indicator.csv --config config/agent_config.yaml --out-table tables/diagnostics/anxiety_convergence.csv --out-md qc/anxiety_convergence.md --seed 20251016`  \n  Outputs: `tables/diagnostics/anxiety_convergence.csv`, `qc/anxiety_convergence.md`\n- CSA–anxiety diagnostics scope (2025-11-04T14:05Z): `analysis/csa_anxiety_diagnostics_plan.md` — manual plan covering convergent validity (Task T-017) and interaction modelling (Task T-018); future scripts must log seed 20251016 and update this manifest.\n\n### Notes (2025-11-04T13:36Z)\n- Findings report advanced to v0.3 with literature synthesis; manuscript updated in lockstep.\n- Semantic Scholar queries stored under `lit/queries/` (see reproducibility notes) with bibliography/evidence map refreshed to cite Lindert et al. 2014, Hashim et al. 2024, and Li et al. 2023.\n- CSA–anxiety measurement diagnostic plan recorded in `qc/csa_anxiety_measurement_plan.md`. Ordinal DIF diagnostic (T-021) executed; outputs archived in `tables/diagnostics/anxiety_dif.csv` and `qc/anxiety_dif.md`.\n\n### Notes (2025-11-04T10:38:43Z)\n- Robustness statuses and confidence ratings applied in `analysis/results.csv`; narratives synchronised across Markdown and LaTeX (v0.4).\n- No new analytic commands executed; updates draw on `tables/robustness/robustness_checks_summary.csv` and prior confirmatory outputs.\n\n### Notes (2025-11-04T14:05:00Z)\n- Archived `qc/robustness_summary.md` to centralise robustness evidence and reference regeneration commands.\n- Authored `analysis/csa_anxiety_diagnostics_plan.md`, elevating new backlog tasks T-017 (convergent validity) and T-018 (interaction scripting) for execution in subsequent loops.\n- Updated `artifacts/state.json` and `notebooks/research_notebook.md` to reflect the new QC focus areas.\n\n### Notes (2025-11-04T20:35:47Z)\n- Executed convergent validity diagnostics (`tables/diagnostics/anxiety_convergence.csv`, `qc/anxiety_convergence.md`). Depression and stress items show strong positive convergence; self-love and calmness unexpectedly correlate positively with anxiety, prompting interpretive follow-up.\n- Cronbach's α = 0.800 for negative affect triad; reversed self-regulation composite yields negative α, signalling divergent constructs to investigate during interaction scripting (Task T-018).\n\n> **Note:** Any deviation from the frozen PAP requires an amendment documented in both the decision log and this manifest, with updated tags.\n",
      "mode": "text"
    },
    {
      "path": "lit/bibliography.bib",
      "content": "% Bibliography curated via Semantic Scholar queries on 2025-11-04.\n% Regenerate with commands documented in notebooks/research_notebook.md.\n\n@article{lindert2014,\n  title = {Sexual and Physical Abuse in Childhood Is Associated with Depression and Anxiety over the Life Course: Systematic Review and Meta-Analysis},\n  author = {Lindert, Jutta and Ehrenstein, Oliver S. von and Grashow, Rachel and Gal, Gabriel and Braehler, Elmar and Weisskopf, Marc G.},\n  journal = {International Journal of Public Health},\n  year = {2014},\n  volume = {59},\n  pages = {359--372},\n  doi = {10.1007/s00038-013-0519-5},\n  url = {https://doi.org/10.1007/s00038-013-0519-5},\n  urldate = {2025-11-04},\n  note = {Systematic review and meta-analysis linking childhood sexual abuse to higher lifetime anxiety and depression risk.}\n}\n\n@article{hashim2024,\n  title = {Association of Childhood Sexual Abuse with Adolescent's Psychopathology: A Systematic Review and Meta-Analysis},\n  author = {Hashim, Mohammad and Iqbal, Naved and Halligan, Sarah L. and Alimoradi, Zainab and Pfaltz, Monique and Farooqi, Saif R. and Khan, Irum and Galan, Chardee A. and Vostanis, Panos},\n  journal = {Trauma, Violence, & Abuse},\n  year = {2024},\n  volume = {26},\n  pages = {483--496},\n  doi = {10.1177/15248380241281365},\n  url = {https://doi.org/10.1177/15248380241281365},\n  urldate = {2025-11-04},\n  note = {Meta-analysis showing elevated anxiety and related psychopathology among adolescents exposed to childhood sexual abuse.}\n}\n\n@article{li2023,\n  title = {Anxiety and Depression Symptoms among Youth Survivors of Childhood Sexual Abuse: A Network Analysis},\n  author = {Li, Jiaqi and Jin, Yu and Xu, Shicun and Luo, Xianyu and Wilson, Amanda and Li, Hui and Wang, Xiaofeng and Sun, Xi and Wang, Yuanyuan},\n  journal = {BMC Psychology},\n  year = {2023},\n  volume = {11},\n  doi = {10.1186/s40359-023-01275-3},\n  url = {https://doi.org/10.1186/s40359-023-01275-3},\n  urldate = {2025-11-04},\n  note = {Network analysis identifying anxiety symptoms as central among CSA survivors in Chinese university sample.}\n}\n\n@article{sowislo2013,\n  title = {Does Low Self-Esteem Predict Depression and Anxiety? A Meta-Analysis of Longitudinal Studies},\n  author = {Sowislo, Julia Friederike and Orth, Ulrich},\n  journal = {Psychological Bulletin},\n  year = {2013},\n  volume = {139},\n  number = {1},\n  pages = {213--240},\n  doi = {10.1037/a0028931},\n  url = {https://doi.org/10.1037/a0028931},\n  urldate = {2025-11-04},\n  note = {Meta-analysis showing that lower self-esteem prospectively predicts elevated anxiety, motivating the expected negative association with self-regulation items.}\n}\n",
      "mode": "text"
    },
    {
      "path": "lit/bibliography.json",
      "content": "[\n  {\n    \"id\": \"lindert2014\",\n    \"title\": \"Sexual and Physical Abuse in Childhood Is Associated with Depression and Anxiety over the Life Course: Systematic Review and Meta-Analysis\",\n    \"authors\": [\"Jutta Lindert\", \"Oliver S. von Ehrenstein\", \"Rachel Grashow\", \"Gabriel Gal\", \"Elmar Braehler\", \"Marc G. Weisskopf\"],\n    \"year\": 2014,\n    \"doi\": \"10.1007/s00038-013-0519-5\",\n    \"url\": \"https://doi.org/10.1007/s00038-013-0519-5\",\n    \"accessed\": \"2025-11-04\",\n    \"note\": \"Systematic review and meta-analysis linking childhood sexual abuse to higher lifetime anxiety and depression risk.\"\n  },\n  {\n    \"id\": \"hashim2024\",\n    \"title\": \"Association of Childhood Sexual Abuse with Adolescent's Psychopathology: A Systematic Review and Meta-Analysis\",\n    \"authors\": [\"Mohammad Hashim\", \"Naved Iqbal\", \"Sarah L. Halligan\", \"Zainab Alimoradi\", \"Monique Pfaltz\", \"Saif R. Farooqi\", \"Irum Khan\", \"Chardee A. Galan\", \"Panos Vostanis\"],\n    \"year\": 2024,\n    \"doi\": \"10.1177/15248380241281365\",\n    \"url\": \"https://doi.org/10.1177/15248380241281365\",\n    \"accessed\": \"2025-11-04\",\n    \"note\": \"Meta-analysis showing elevated anxiety and related psychopathology among adolescents exposed to childhood sexual abuse.\"\n  },\n  {\n    \"id\": \"li2023\",\n    \"title\": \"Anxiety and Depression Symptoms among Youth Survivors of Childhood Sexual Abuse: A Network Analysis\",\n    \"authors\": [\"Jiaqi Li\", \"Yu Jin\", \"Shicun Xu\", \"Xianyu Luo\", \"Amanda Wilson\", \"Hui Li\", \"Xiaofeng Wang\", \"Xi Sun\", \"Yuanyuan Wang\"],\n    \"year\": 2023,\n    \"doi\": \"10.1186/s40359-023-01275-3\",\n    \"url\": \"https://doi.org/10.1186/s40359-023-01275-3\",\n    \"accessed\": \"2025-11-04\",\n    \"note\": \"Network analysis identifying anxiety symptoms as central among CSA survivors in Chinese university sample.\"\n  },\n  {\n    \"id\": \"sowislo2013\",\n    \"title\": \"Does Low Self-Esteem Predict Depression and Anxiety? A Meta-Analysis of Longitudinal Studies\",\n    \"authors\": [\"Julia Friederike Sowislo\", \"Ulrich Orth\"],\n    \"year\": 2013,\n    \"doi\": \"10.1037/a0028931\",\n    \"url\": \"https://doi.org/10.1037/a0028931\",\n    \"accessed\": \"2025-11-04\",\n    \"note\": \"Meta-analysis showing that lower self-esteem prospectively predicts higher anxiety, informing expectations for negative self-regulation correlations.\"\n  }\n]\n",
      "mode": "text"
    },
    {
      "path": "lit/evidence_map.csv",
      "content": "concept,source_id,source_title,quality_rating,notes\r\nCSA and anxiety,lindert2014,Sexual and Physical Abuse in Childhood Is Associated with Depression and Anxiety over the Life Course: Systematic Review and Meta-Analysis,high,Meta-analysis of population and clinical studies; finds higher odds of anxiety disorders among CSA survivors.\r\nCSA and anxiety,hashim2024,Association of Childhood Sexual Abuse with Adolescent's Psychopathology: A Systematic Review and Meta-Analysis,high,Synthesizes adolescent samples; reports pooled elevated anxiety symptoms following CSA.\r\nCSA and anxiety,li2023,Anxiety and Depression Symptoms among Youth Survivors of Childhood Sexual Abuse: A Network Analysis,moderate,Identifies worry-related symptoms as central nodes among CSA survivors; underscores expectation of higher self-reported anxiety.\r\nAnxiety self-regulation alignment,sowislo2013,Does Low Self-Esteem Predict Depression and Anxiety? A Meta-Analysis of Longitudinal Studies,high,Meta-analysis shows self-esteem deficits precede higher anxiety; our positive self-love correlations warrant further diagnostics.\r\n",
      "mode": "text"
    },
    {
      "path": "artifacts/state.json",
      "content": "{\n  \"backlog\": [\n    {\n      \"description\": \"Validate survey weights and replicate design\",\n      \"id\": \"T-001\",\n      \"priority\": 1,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Exploratory weighted summaries for key outcomes\",\n      \"id\": \"T-002\",\n      \"priority\": 1,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Align codebook schema with dataset\",\n      \"id\": \"T-003\",\n      \"priority\": 2,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Profile missingness patterns for key variables\",\n      \"id\": \"T-004\",\n      \"priority\": 2,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Draft robustness checks for priority hypotheses\",\n      \"id\": \"T-005\",\n      \"priority\": 3,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Derive CSA_score_indicator and validate distribution\",\n      \"id\": \"T-006\",\n      \"priority\": 2,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Assess feasibility of social support predictor given 97% missingness\",\n      \"id\": \"T-007\",\n      \"priority\": 2,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Draft confirmatory model equations/code skeleton for PAP freeze\",\n      \"id\": \"T-008\",\n      \"priority\": 3,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Verify instrument equivalence for social support items (tmt46e6 vs 71mn55g)\",\n      \"id\": \"T-009\",\n      \"priority\": 2,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Freeze PAP and tag reproducibility checkpoint\",\n      \"id\": \"T-010\",\n      \"priority\": 1,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Plan FDR procedure and robustness execution scripts\",\n      \"id\": \"T-011\",\n      \"priority\": 2,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Run confirmatory models for HYP-001 and HYP-003 per frozen PAP\",\n      \"id\": \"T-012\",\n      \"priority\": 1,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Integrate robustness outputs into confirmatory reporting and update results flags\",\n      \"id\": \"T-013\",\n      \"priority\": 1,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Update findings report and manuscript with FDR-adjusted estimates and robustness narrative\",\n      \"id\": \"T-014\",\n      \"priority\": 2,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Synthesize robustness QC outputs and archive summary memo\",\n      \"id\": \"T-015\",\n      \"priority\": 2,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Plan CSA-anxiety scale diagnostics and subgroup heterogeneity checks\",\n      \"id\": \"T-016\",\n      \"priority\": 2,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Execute convergent validity diagnostics for anxiety item (Module M3)\",\n      \"id\": \"T-017\",\n      \"priority\": 2,\n      \"status\": \"completed\"\n    },\n    {\n      \"description\": \"Develop CSA-anxiety interaction scripts and QC templates\",\n      \"id\": \"T-018\",\n      \"priority\": 3,\n      \"status\": \"pending\"\n    },\n    {\n      \"description\": \"Investigate unexpected positive self-regulation correlations and document implications\",\n      \"id\": \"T-019\",\n      \"priority\": 2,\n      \"status\": \"pending\"\n    }\n  ],\n  \"bootstrap_complete\": true,\n  \"last_updated\": \"2025-11-04T20:35:47Z\",\n  \"loop_counter\": 24,\n  \"next_actions\": [\n    {\n      \"description\": \"Develop CSA-anxiety interaction scripts and QC templates\",\n      \"id\": \"T-018\",\n      \"priority\": 3\n    },\n    {\n      \"description\": \"Investigate unexpected positive self-regulation correlations from convergence diagnostics\",\n      \"id\": \"T-019\",\n      \"priority\": 2\n    }\n  ],\n  \"notes\": \"PAP frozen 2025-11-04T10:06Z; confirmatory HC3 OLS executed 2025-11-04T10:17Z with seed 20251016. FDR adjustment archived to tables/fdr_adjustment_confirmatory.csv. Robustness memo `qc/robustness_summary.md` and CSA-anxiety diagnostics plan `analysis/csa_anxiety_diagnostics_plan.md` recorded 2025-11-04T14:05Z. Convergent validity diagnostics executed 2025-11-04T20:35Z; depression/stress align, while self-love/calm positive correlations require follow-up via T-018/T-019.\",\n  \"pap_status\": \"frozen\",\n  \"priority_hypotheses\": [\n    \"HYP-001\",\n    \"HYP-003\"\n  ],\n  \"seed\": 20251016,\n  \"total_loops\": 30\n}\n",
      "mode": "text"
    },
    {
      "path": "lit/queries/20251104_crossref_self_esteem_anxiety.json",
      "content": "{\"status\":\"ok\",\"message-type\":\"work-list\",\"message-version\":\"1.0.0\",\"message\":{\"facets\":{},\"total-results\":1349613,\"items\":[{\"indexed\":{\"date-parts\":[[2025,11,4]],\"date-time\":\"2025-11-04T15:53:46Z\",\"timestamp\":1762271626863,\"version\":\"3.37.3\"},\"reference-count\":0,\"publisher\":\"American Psychological Association (APA)\",\"issue\":\"1\",\"funder\":[{\"DOI\":\"10.13039/501100001711\",\"name\":\"Swiss National Science Foundation\",\"doi-asserted-by\":\"publisher\",\"award\":[\"PP00P1-123370\"],\"id\":[{\"id\":\"10.13039/501100001711\",\"id-type\":\"DOI\",\"asserted-by\":\"publisher\"}]}],\"content-domain\":{\"domain\":[],\"crossmark-restriction\":false},\"short-container-title\":[\"Psychological Bulletin\"],\"DOI\":\"10.1037/a0028931\",\"type\":\"journal-article\",\"created\":{\"date-parts\":[[2012,6,27]],\"date-time\":\"2012-06-27T14:21:07Z\",\"timestamp\":1340806867000},\"page\":\"213-240\",\"source\":\"Crossref\",\"is-referenced-by-count\":1511,\"title\":[\"Does low self-esteem predict depression and anxiety? A meta-analysis of longitudinal studies.\"],\"prefix\":\"10.1037\",\"volume\":\"139\",\"author\":[{\"ORCID\":\"https://orcid.org/0000-0002-0132-2226\",\"authenticated-orcid\":false,\"given\":\"Julia Friederike\",\"family\":\"Sowislo\",\"sequence\":\"first\",\"affiliation\":[]},{\"ORCID\":\"https://orcid.org/0000-0002-4795-515X\",\"authenticated-orcid\":false,\"given\":\"Ulrich\",\"family\":\"Orth\",\"sequence\":\"additional\",\"affiliation\":[]}],\"member\":\"15\",\"published-online\":{\"date-parts\":[[2013,1]]},\"container-title\":[\"Psychological Bulletin\"],\"language\":\"en\",\"link\":[{\"URL\":\"http://psycnet.apa.org/journals/bul/139/1/213.pdf\",\"content-type\":\"unspecified\",\"content-version\":\"vor\",\"intended-application\":\"similarity-checking\"}],\"deposited\":{\"date-parts\":[[2024,2,6]],\"date-time\":\"2024-02-06T00:21:27Z\",\"timestamp\":1707178887000},\"score\":41.16406,\"resource\":{\"primary\":{\"URL\":\"https://doi.apa.org/doi/10.1037/a0028931\"}},\"issued\":{\"date-parts\":[[2013,1]]},\"references-count\":0,\"journal-issue\":{\"issue\":\"1\",\"published-online\":{\"date-parts\":[[2013,1]]}},\"alternative-id\":[\"2012-16517-001\",\"22730921\"],\"URL\":\"https://doi.org/10.1037/a0028931\",\"ISSN\":[\"1939-1455\",\"0033-2909\"],\"issn-type\":[{\"type\":\"electronic\",\"value\":\"1939-1455\"},{\"type\":\"print\",\"value\":\"0033-2909\"}],\"published\":{\"date-parts\":[[2013,1]]}},{\"indexed\":{\"date-parts\":[[2025,11,4]],\"date-time\":\"2025-11-04T15:57:06Z\",\"timestamp\":1762271826326,\"version\":\"3.37.3\"},\"reference-count\":0,\"publisher\":\"American Psychological Association (APA)\",\"issue\":\"4\",\"funder\":[{\"DOI\":\"10.13039/501100001711\",\"name\":\"Swiss National Science Foundation\",\"doi-asserted-by\":\"publisher\",\"award\":[\"PP00P1-123370\"],\"id\":[{\"id\":\"10.13039/501100001711\",\"id-type\":\"DOI\",\"asserted-by\":\"publisher\"}]}],\"content-domain\":{\"domain\":[],\"crossmark-restriction\":false},\"short-container-title\":[\"Journal of Abnormal Psychology\"],\"DOI\":\"10.1037/a0037770\",\"type\":\"journal-article\",\"created\":{\"date-parts\":[[2014,9,15]],\"date-time\":\"2014-09-15T14:28:46Z\",\"timestamp\":1410791326000},\"page\":\"737-753\",\"source\":\"Crossref\",\"is-referenced-by-count\":52,\"title\":[\"What constitutes vulnerable self-esteem? Comparing the prospective effects of low, unstable, and contingent self-esteem on depressive symptoms.\"],\"prefix\":\"10.1037\",\"volume\":\"123\",\"author\":[{\"ORCID\":\"https://orcid.org/0000-0002-0132-2226\",\"authenticated-orcid\":false,\"given\":\"Julia Friederike\",\"family\":\"Sowislo\",\"sequence\":\"first\",\"affiliation\":[]},{\"ORCID\":\"https://orcid.org/0000-0002-4795-515X\",\"authenticated-orcid\":false,\"given\":\"Ulrich\",\"family\":\"Orth\",\"sequence\":\"additional\",\"affiliation\":[]},{\"given\":\"Laurenz L.\",\"family\":\"Meier\",\"sequence\":\"additional\",\"affiliation\":[]}],\"member\":\"15\",\"published-online\":{\"date-parts\":[[2014,11]]},\"container-title\":[\"Journal of Abnormal Psychology\"],\"language\":\"en\",\"link\":[{\"URL\":\"http://psycnet.apa.org/journals/abn/123/4/737.pdf\",\"content-type\":\"unspecified\",\"content-version\":\"vor\",\"intended-application\":\"similarity-checking\"}],\"deposited\":{\"date-parts\":[[2024,2,6]],\"date-time\":\"2024-02-06T00:29:40Z\",\"timestamp\":1707179380000},\"score\":36.147423,\"resource\":{\"primary\":{\"URL\":\"https://doi.apa.org/doi/10.1037/a0037770\"}},\"issued\":{\"date-parts\":[[2014,11]]},\"references-count\":0,\"journal-issue\":{\"issue\":\"4\",\"published-online\":{\"date-parts\":[[2014,11]]}},\"alternative-id\":[\"2014-37946-001\",\"25222046\"],\"URL\":\"https://doi.org/10.1037/a0037770\",\"ISSN\":[\"1939-1846\",\"0021-843X\"],\"issn-type\":[{\"type\":\"electronic\",\"value\":\"1939-1846\"},{\"type\":\"print\",\"value\":\"0021-843X\"}],\"published\":{\"date-parts\":[[2014,11]]}},{\"indexed\":{\"date-parts\":[[2024,9,15]],\"date-time\":\"2024-09-15T14:15:28Z\",\"timestamp\":1726409728054},\"publisher-location\":\"Cham\",\"reference-count\":18,\"publisher\":\"Springer International Publishing\",\"isbn-type\":[{\"type\":\"print\",\"value\":\"9783319698922\"},{\"type\":\"electronic\",\"value\":\"9783319698922\"}],\"license\":[{\"start\":{\"date-parts\":[[2019,1,1]],\"date-time\":\"2019-01-01T00:00:00Z\",\"timestamp\":1546300800000},\"content-version\":\"tdm\",\"delay-in-days\":0,\"URL\":\"http://www.springer.com/tdm\"}],\"content-domain\":{\"domain\":[\"link.springer.com\"],\"crossmark-restriction\":false},\"published-print\":{\"date-parts\":[[2019]]},\"DOI\":\"10.1007/978-3-319-69892-2_13\",\"type\":\"book-chapter\",\"created\":{\"date-parts\":[[2018,10,27]],\"date-time\":\"2018-10-27T05:12:43Z\",\"timestamp\":1540617163000},\"page\":\"285-299\",\"source\":\"Crossref\",\"is-referenced-by-count\":5,\"title\":[\"Self-esteem and Anxiety\"],\"prefix\":\"10.1007\",\"author\":[{\"given\":\"Lauri\",\"family\":\"Tuominen\",\"sequence\":\"first\",\"affiliation\":[{\"name\":\"University of Turku\"}]},{\"given\":\"Tuulikki\",\"family\":\"Hietajärvi\",\"sequence\":\"additional\",\"affiliation\":[{\"name\":\"University of Turku\"}]}],\"member\":\"297\",\"container-title\":[\"Self-Concept, Motivation and Identity\"],\"link\":[{\"URL\":\"https://link.springer.com/content/pdf/10.1007/978-3-319-69892-2_13.pdf\",\"content-type\":\"unspecified\",\"content-version\":\"vor\",\"intended-application\":\"similarity-checking\"}],\"deposited\":{\"date-parts\":[[2023,11,10]],\"date-time\":\"2023-11-10T11:47:13Z\",\"timestamp\":1699610833000},\"score\":32.47614,\"resource\":{\"primary\":{\"URL\":\"https://doi.org/10.1007/978-3-319-69892-2_13\"}},\"issued\":{\"date-parts\":[[2019]]},\"references-count\":18,\"ISBN\":[\"9783319698922\",\"9783319698922\"],\"URL\":\"https://doi.org/10.1007/978-3-319-69892-2_13\",\"ISSN\":[],\"issn-type\":[]}],\"items-per-page\":5,\"query\":{\"search-terms\":\"Sowislo Orth self-esteem anxiety\",\"start-index\":0}}}",
      "mode": "text"
    },
    {
      "path": "lit/queries/20251104_semanticscholar_self_esteem_anxiety.json",
      "content": "{\"message\": \"Too Many Requests. Please wait and try again or apply for a key for higher rate limits. https://www.semanticscholar.org/product/api#api-key-form\", \"code\": \"429\"}",
      "mode": "text"
    },
    {
      "path": "lit/queries/20251104_semanticscholar_single_item_anxiety.json",
      "content": "{\"message\": \"Too Many Requests. Please wait and try again or apply for a key for higher rate limits. https://www.semanticscholar.org/product/api#api-key-form\", \"code\": \"429\"}",
      "mode": "text"
    }
  ],
  "decision_log_row": {
    "ts": "2025-11-04T20:35:47Z",
    "action": "anxiety_convergence",
    "inputs": [
      "data/clean/childhoodbalancedpublic_with_csa_indicator.csv",
      "config/agent_config.yaml",
      "analysis/code/evaluate_anxiety_convergence.py"
    ],
    "rationale_short": "Ran convergent validity correlations + polychoric estimators for anxiety Module M3.",
    "code_path": "analysis/code/evaluate_anxiety_convergence.py",
    "outputs": [
      "tables/diagnostics/anxiety_convergence.csv",
      "qc/anxiety_convergence.md"
    ],
    "status": "success"
  },
  "next_actions": [
    {
      "id": "T-018",
      "priority": 3,
      "desc": "Develop CSA-anxiety interaction scripts and QC templates",
      "estimate_min": "30m"
    },
    {
      "id": "T-019",
      "priority": 2,
      "desc": "Investigate unexpected positive self-regulation correlations from convergence diagnostics",
      "estimate_min": "25m"
    }
  ],
  "state_update": {
    "loop_counter": 24
  },
  "git": {
    "commit": true,
    "message": "feat(diagnostics): add anxiety convergent validity module"
  },
  "stop_now": false,
  "stop_reason": "",
  "signals": [
    "Diagnostics: Anxiety aligns with depression/stress (r≈0.62) while self-love/calm show unexpected positive correlations; flagged for T-019 follow-up.",
    "Reliability: Cronbach's alpha 0.800 for negative affect triad; reversed self-regulation composite alpha -0.682 indicates divergent constructs.",
    "Literature: Added Sowislo & Orth 2013 via Crossref after Semantic Scholar API returned 429 rate-limit."
  ]
}
```