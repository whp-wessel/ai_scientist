           f\"- `{alias.column}` matches the instrument-coded column: {alias.identical_to_reference}\"\n            for alias in alias_reviews\n        )\n    )\n    value_labels = codebook_meta.get(\"value_labels\", {})\n    labels_lines = [\n        f\"  - {key}: {value}\" for key, value in sorted(value_labels.items(), key=lambda kv: float(kv[0]))\n    ]\n    md_lines = [\n        \"# Anxiety Item Coding & Routing Review\",\n        f\"Generated: {timestamp} | Seed: {seed}\",\n        \"\",\n        \"## Reproduction\",\n        \"```bash\",\n        \"python analysis/code/review_anxiety_instrument.py \\\\\",\n        \"    --dataset data/raw/childhoodbalancedpublic_original.csv \\\\\",\n        \"    --config config/agent_config.yaml \\\\\",\n        \"    --codebook docs/codebook.json \\\\\",\n        \"    --out-table tables/diagnostics/anxiety_item_review.csv \\\\\",\n        \"    --out-md qc/anxiety_item_routing.md\",\n        \"```\",\n        \"\",\n        \"## Coding Summary\",\n        f\"- Instrument-coded column: `{primary.column}` (ID `{primary.instrument_id}`)\",\n        f\"- Scale span: {int(primary.min_value)} to {int(primary.max_value)} on a centred 7-point agreement scale\",\n        f\"- Value labels:\",\n        *labels_lines,\n        f\"- Mean agreement: {primary.mean:.3f} (SD {primary.std:.3f}); coverage {primary.coverage_pct:.2f}% (missing <{threshold})\",\n        \"\",\n        \"## Routing Assessment\",\n        f\"- {routing_note}\",\n        \"- Missingness is below the disclosure threshold; observed nonresponse aligns with other mental-health battery items, suggesting refusals rather than programmed skips.\",\n        \"\",\n        \"## Alias Checks\",\n        alias_note,\n        \"\",\n        \"## Outputs\",\n        f\"- Summary table: `{table_path.as_posix()}` (suppresses counts below {threshold})\",\n        f\"- Codebook reference: `docs/codebook.json` entry for `{primary.column}`\",\n    ]\n    out_md_path.write_text(\"\\n\".join(md_lines) + \"\\n\")\n\n\ndef main() -> None:\n    args = parse_args()\n    dataset_path = Path(args.dataset)\n    config_path = Path(args.config)\n    codebook_path = Path(args.codebook)\n    out_table_path = Path(args.out_table)\n    out_md_path = Path(args.out_md)\n\n    seed, threshold = load_config(config_path)\n    random.seed(seed)\n    np.random.seed(seed)\n\n    columns = pd.read_csv(dataset_path, nrows=0).columns.tolist()\n    candidates = find_candidate_columns(columns)\n    if not candidates:\n        raise ValueError(f\"No columns containing '{TARGET_STEM}' found in dataset.\")\n\n    usecols = candidates\n    df = pd.read_csv(dataset_path, usecols=usecols)\n    reference_series = None\n    primary_name = next(col for col in candidates if \"(npvfh98)\" in col)\n    reference_series = df[primary_name]\n\n    reviews = [\n        summarise_column(df, column, None if column == primary_name else reference_series, threshold)\n        for column in candidates\n    ]\n\n    routing_columns = locate_routing_columns(columns)\n    codebook_meta = load_codebook_metadata(codebook_path)\n\n    out_table_path.parent.mkdir(parents=True, exist_ok=True)\n    build_table_frame(reviews).to_csv(out_table_path, index=False)\n\n    out_md_path.parent.mkdir(parents=True, exist_ok=True)\n    render_markdown(\n        out_md_path=out_md_path,\n        seed=seed,\n        threshold=threshold,\n        table_path=out_table_path,\n        codebook_meta=codebook_meta,\n        reviews=reviews,\n        routing_columns=routing_columns,\n    )\n\n\nif __name__ == \"__main__\":\n    main()\n", "mode": "text"}, {"path": "qc/anxiety_item_routing.md", "content": "# Anxiety Item Coding & Routing Review\nGenerated: 2025-11-04T08:48:25.300856+00:00 | Seed: 20251016\n\n## Reproduction\n```bash\npython analysis/code/review_anxiety_instrument.py \\\n    --dataset data/raw/childhoodbalancedpublic_original.csv \\\n    --config config/agent_config.yaml \\\n    --codebook docs/codebook.json \\\n    --out-table tables/diagnostics/anxiety_item_review.csv \\\n    --out-md qc/anxiety_item_routing.md\n```\n\n## Coding Summary\n- Instrument-coded column: `I tend to suffer from anxiety (npvfh98)-neg` (ID `npvfh98`)\n- Scale span: -3 to 3 on a centred 7-point agreement scale\n- Value labels:\n  - -3: Strongly disagree\n  - -2: Disagree\n  - -1: Somewhat disagree\n  - 0: Neutral\n  - 1: Somewhat agree\n  - 2: Agree\n  - 3: Strongly agree\n- Mean agreement: -0.827 (SD 2.031); coverage 99.96% (missing <10)\n\n## Routing Assessment\n- No routing/skip-tracking columns containing the instrument code were found.\n- Missingness is below the disclosure threshold; observed nonresponse aligns with other mental-health battery items, suggesting refusals rather than programmed skips.\n\n## Alias Checks\n- `I tend to suffer from anxiety -neg` matches the instrument-coded column: True\n\n## Outputs\n- Summary table: `tables/diagnostics/anxiety_item_review.csv` (suppresses counts below 10)\n- Codebook reference: `docs/codebook.json` entry for `I tend to suffer from anxiety (npvfh98)-neg`\n", "mode": "text"}, {"path": "tables/diagnostics/anxiety_item_review.csv", "content": "column,instrument_id,n_total,n_missing,coverage_pct,mean,std,min,max,unique_values,identical_to_reference\nI tend to suffer from anxiety (npvfh98)-neg,npvfh98,14443,<10,99.958,-0.827,2.031,-3.0,3.0,\"-3, -2, -1, 0, 1, 2, 3\",\nI tend to suffer from anxiety -neg,,14443,<10,99.958,-0.827,2.031,-3.0,3.0,\"-3, -2, -1, 0, 1, 2, 3\",True\n", "mode": "text"}, {"path": "notebooks/research_notebook.md", "content": "# Research Notebook\nUpdated: 2025-11-04T09:25:35Z | Seed: 20251016\n\nReproducibility: run `python analysis/code/bootstrap_setup.py`; env info in `artifacts/session_info.txt`; checksums in `artifacts/checksums.json`.\n\nHypotheses: HYP-001 childhood class ↑ self-love; HYP-002 current class ↓ depression; HYP-003 CSA ↑ anxiety; HYP-004 support ↑ self-love.\n\n2025-11-03T20:29Z — Survey design validation confirms no sampling weights/strata/clusters present in `childhoodbalancedpublic_original.csv`; working under simple random sampling assumption. See `qc/survey_design_validation.md` regenerated via `python analysis/code/validate_survey_design.py`.\n\n2025-11-03T20:34Z (Exploratory) — Generated outcome distributions under SRS assumption via\\\n `python analysis/code/eda_weighted_summaries.py --dataset childhoodbalancedpublic_original.csv --codebook docs/codebook.json --config config/agent_config.yaml --out-summary tables/exploratory_outcome_summary.csv --out-distribution tables/exploratory_outcome_distribution.csv`.\\\n Key findings: self-love skews positive (median=1), while depression/anxiety skew negative (median -1). All categories exceed the small-cell threshold (10). Outputs: `tables/exploratory_outcome_summary.csv`, `tables/exploratory_outcome_distribution.csv`.\n\nTODO: document literature and exploratory findings (labelled \"Exploratory\"); derive CSA indicator prior to PAP fre