{"files":[{"path":"analysis/code/bootstrap_setup.py","content":"#!/usr/bin/env python3\n\"\"\"Bootstrap scaffolding generator (auto-generated).\"\"\"\nimport argparse\nimport json\nfrom pathlib import Path\nTIMESTAMP = \"2025-11-03T20:01:43Z\"\nSEED = 20251016\nFILES = {\n    \"analysis/hypotheses.csv\": \"id,family,description,outcome_var,predictors,controls,population/subset,estimand,status,notes\\nHYP-001,Wellbeing,\\\"Childhood class positively relates to adult self-love.\\\",I love myself (2l8994l),classchild,\\\"selfage; gendermale\\\",\\\"Non-missing classchild & outcome\\\",\\\"Weighted mean change per class unit\\\",proposed,\\\"Survey OLS; ordinal logit check.\\\"\\nHYP-002,MentalHealth,\\\"Current class inversely relates to depression agreement.\\\",I tend to suffer from depression (wz901dj),classcurrent,\\\"selfage; gendermale; cis\\\",\\\"Non-missing classcurrent & outcome\\\",\\\"Weighted coefficient on classcurrent\\\",proposed,\\\"Spline robustness.\\\"\\nHYP-003,MentalHealth,\\\"CSA exposure associates with higher anxiety agreement.\\\",I tend to suffer from anxiety (npvfh98)-neg,CSA_score_indicator,\\\"selfage; gendermale\\\",\\\"Observed CSA_score\\\",\\\"Weighted mean difference (CSA>0 vs 0)\\\",proposed,\\\"Ordinal CSA bins for sensitivity.\\\"\\nHYP-004,SocialSupport,\\\"Supportive circles associate with higher self-love.\\\",I love myself (2l8994l),\\\"In general, people in my *current* social circles tend treat me really well (tmt46e6)\\\",\\\"selfage; gendermale\\\",\\\"Non-missing support & outcome\\\",\\\"Weighted coefficient on support\\\",proposed,\\\"Ordinal logit robustness.\\\"\\n\",\n    \"analysis/pre_analysis_plan.md\": \"# PAP Draft\\nGenerated: 2025-11-03T20:01:43Z | Seed: 20251016\\nStatus: Draft (not frozen) | Regen: `python analysis/code/bootstrap_setup.py --artifact analysis/pre_analysis_plan.md`\\n\\nPortfolio: HYP-001 (High), HYP-002 (Medium), HYP-003 (High), HYP-004 (Medium)\\n\\nHYP-001 \u2192 Outcome `I love myself (2l8994l)`; Predictor `classchild`; Covariates `selfage`, `gendermale`, `cis`; Estimand weighted change per class unit; Model survey OLS (HC3); Robustness collapse class + ordinal logit; MI if missing >5%.\\n\\nHYP-003 \u2192 Outcome `I tend to suffer from anxiety (npvfh98)-neg`; Predictor `CSA_score_indicator`; Covariates `selfage`, `gendermale`, `classchild`; Estimand weighted mean difference; Model survey OLS + design t-test; Robustness ordinal CSA bins + drop CSA>=6; monitor missingness.\\n\\nRoadmap: 1) Finalize survey design. 2) Label exploratory descriptives. 3) Freeze PAP & tag git. 4) Execute confirmatory models and log seeds in `analysis/results.csv` + MANIFEST.\\n\\nManuscript parity: update `reports/findings_v0.1.md` and `papers/main/manuscript.tex` together; store regeneration commands with outputs.\\n\",\n    \"analysis/results.csv\": \"hypothesis_id,model,n_unweighted,n_weighted,estimate,se,ci_low,ci_high,p_value,q_value,effect_size_metric,robustness_passed,limitations,confidence_rating\\n\",\n    \"artifacts/state.json\": \"{\\\"loop_counter\\\":0,\\\"total_loops\\\":30,\\\"bootstrap_complete\\\":true,\\\"last_updated\\\":\\\"2025-11-03T20:01:43Z\\\",\\\"seed\\\":20251016,\\\"backlog\\\":[{\\\"id\\\":\\\"T-001\\\",\\\"priority\\\":1,\\\"description\\\":\\\"Validate survey weights and replicate design\\\",\\\"status\\\":\\\"pending\\\"},{\\\"id\\\":\\\"T-002\\\",\\\"priority\\\":2,\\\"description\\\":\\\"Exploratory weighted summaries for key outcomes\\\",\\\"status\\\":\\\"pending\\\"}],\\\"next_actions\\\":[{\\\"id\\\":\\\"T-001\\\",\\\"priority\\\":1,\\\"description\\\":\\\"Validate survey weights and replicate design\\\"},{\\\"id\\\":\\\"T-002\\\",\\\"priority\\\":2,\\\"description\\\":\\\"Exploratory weighted summaries for key outcomes\\\"}],\\\"pap_status\\\":\\\"draft\\\",\\\"priority_hypotheses\\\":[\\\"HYP-001\\\",\\\"HYP-003\\\"],\\\"notes\\\":\\\"Bootstrap scaffolding ready; awaiting survey design confirmation.\\\"}\\n\",\n    \"config/agent_config.yaml\": \"seed: 20251016\\nfdr_q: 0.05\\nsmall_cell_threshold: 10\\nsurvey_design_file: docs/survey_design.yaml\\ncodebook_file: docs/codebook.json\\ndecision_log: analysis/decision_log.csv\\nmanuscript: { markdown: reports/findings_v0.1.md, latex: papers/main/manuscript.tex, ensure_parity: true }\\nreproducibility: { session_info: artifacts/session_info.txt, checksums: artifacts/checksums.json, seed_file: artifacts/seed.txt, regeneration_command: python analysis/code/bootstrap_setup.py }\\nlogging: { level: INFO, timezone: UTC }\\nnotes: bootstrap defaults; update after survey design + PAP freeze.\\n\",\n    \"docs/codebook.json\": \"{\\\"dataset\\\":\\\"childhoodbalancedpublic_original.csv\\\",\\\"generated_at\\\":\\\"2025-11-03T20:01:43Z\\\",\\\"notes\\\":\\\"TODO replace with official codebook details.\\\",\\\"variables\\\":[{\\\"name\\\":\\\"classchild\\\",\\\"label\\\":\\\"Childhood household class (hxyr6oa)\\\",\\\"type\\\":\\\"ordinal\\\",\\\"analysis_role\\\":\\\"predictor\\\",\\\"values_note\\\":\\\"0-6 scale; labels TBD\\\"},{\\\"name\\\":\\\"classcurrent\\\",\\\"label\\\":\\\"Current household class (m5tjvul)\\\",\\\"type\\\":\\\"ordinal\\\",\\\"analysis_role\\\":\\\"predictor\\\",\\\"values_note\\\":\\\"0-6 scale; labels TBD\\\"},{\\\"name\\\":\\\"I love myself (2l8994l)\\\",\\\"label\\\":\\\"Self-love Likert\\\",\\\"type\\\":\\\"ordinal_-3_to_3\\\",\\\"analysis_role\\\":\\\"outcome\\\"},{\\\"name\\\":\\\"I tend to suffer from depression (wz901dj)\\\",\\\"label\\\":\\\"Depression tendency\\\",\\\"type\\\":\\\"ordinal_-3_to_3\\\",\\\"analysis_role\\\":\\\"outcome\\\"},{\\\"name\\\":\\\"I tend to suffer from anxiety (npvfh98)-neg\\\",\\\"label\\\":\\\"Anxiety tendency (neg-coded)\\\",\\\"type\\\":\\\"ordinal_-3_to_3\\\",\\\"analysis_role\\\":\\\"outcome\\\"},{\\\"name\\\":\\\"CSA_score\\\",\\\"label\\\":\\\"Childhood sexual abuse composite\\\",\\\"type\\\":\\\"count\\\",\\\"analysis_role\\\":\\\"predictor\\\",\\\"values_note\\\":\\\"0+; bins TBD\\\"}],\\\"weights_reference\\\":\\\"docs/survey_design.yaml\\\",\\\"regeneration\\\":{\\\"seed\\\":20251016,\\\"command\\\":\\\"python analysis/code/bootstrap_setup.py --artifact docs/codebook.json\\\"}}\\n\",\n    \"docs/survey_design.yaml\": \"dataset: childhoodbalancedpublic_original.csv\\ngenerated_at: 2025-11-03T20:01:43Z\\nseed: 20251016\\nweight_variable: null  # TODO confirm\\nstrata_variable: null  # TODO confirm\\ncluster_variable: null  # TODO confirm\\nreplicate_weights: []\\nfpc: null\\nnotes: placeholder simple random sampling assumption until documentation received.\\nregeneration_command: python analysis/code/bootstrap_setup.py --artifact docs/survey_design.yaml\\n\",\n    \"lit/bibliography.bib\": \"% Placeholder bibliography (generated 2025-11-03T20:01:43Z). Replace after Semantic Scholar search.\\n@misc{placeholder2025,\\n  title = {TODO: Populate with peer-reviewed sources},\\n  author = {To Be Determined},\\n  year = {2025},\\n  url = {https://www.semanticscholar.org/},\\n  urldate = {2025-11-03},\\n  note = {Bootstrap placeholder}}\\n\",\n    \"lit/bibliography.json\": \"[{\\\"id\\\":\\\"placeholder2025\\\",\\\"title\\\":\\\"TODO: Populate with peer-reviewed sources\\\",\\\"authors\\\":[],\\\"year\\\":2025,\\\"doi\\\":null,\\\"url\\\":\\\"https://www.semanticscholar.org/\\\",\\\"accessed\\\":\\\"2025-11-03\\\",\\\"note\\\":\\\"Bootstrap placeholder\\\"}]\\n\",\n    \"lit/evidence_map.csv\": \"concept,source_id,source_title,quality_rating,notes\\nCSA and anxiety,placeholder2025,\\\"TODO identify CSA-anxiety sources\\\",unrated,\\\"Update after Semantic Scholar search.\\\"\\nSES and wellbeing,placeholder2025,\\\"TODO map SES-wellbeing evidence\\\",unrated,\\\"Placeholder entry.\\\"\\n\",\n    \"notebooks/research_notebook.md\": \"# Research Notebook\\nUpdated: 2025-11-03T20:01:43Z | Seed: 20251016\\n\\nReproducibility: run `python analysis/code/bootstrap_setup.py`; env info in `artifacts/session_info.txt`; checksums in `artifacts/checksums.json`.\\n\\nHypotheses: HYP-001 childhood class \u2197 self-love; HYP-002 current class \u2198 depression; HYP-003 CSA \u2197 anxiety; HYP-004 support \u2197 self-love.\\n\\nTODO: document survey design, literature, and exploratory findings (labelled \\\"Exploratory\\\"). Prepare `papers/main/MANIFEST.md` when manuscript drafting begins.\\n\",\n    \"qc/data_checks.md\": \"# QC Checklist\\nGenerated: 2025-11-03T20:01:43Z | Seed: 20251016\\nRegeneration: `python analysis/code/bootstrap_setup.py --artifact qc/data_checks.md`\\n- [x] Dataset present (read-only).\\n- [ ] Align schema with codebook (TODO).\\n- [ ] Confirm weight/strata/cluster variables.\\n- [ ] Summarise missingness for key variables.\\n- [ ] Ensure no small cells (n<10) in shared outputs.\\n\",\n}\n\ndef write_file(rel_path: str, raw: str) -> None:\n    text = raw.replace('\\n', '\n')\n    path = Path(rel_path)\n    path.parent.mkdir(parents=True, exist_ok=True)\n    path.write_text(text, encoding='utf-8')\n\ndef main() -> None:\n  